{
  "project": "QIF Framework",
  "version": "0.6.0",
  "last_updated": "2026-02-02",
  "loop_iteration": 15,

  "exit_conditions": {
    "global": "All tasks complete, Editor Agent passes with 0 critical issues, ONI layers correct across all docs",
    "max_iterations": 10
  },

  "tasks": [
    {
      "id": "layer-validation",
      "description": "All 14-layer tables match authoritative TechDoc",
      "status": "complete",
      "exit_condition": "grep finds 0 layer mismatches across all README.md files",
      "completed_at": "2026-01-22",
      "learnings": "README.md had inverted layer domains - always cross-check TechDoc"
    },
    {
      "id": "editor-agent-implementation",
      "description": "Editor Agent with hybrid auto-fix/approval model",
      "status": "complete",
      "exit_condition": "EDITOR_AGENT.md exists with 4 check files",
      "completed_at": "2026-01-22",
      "learnings": "Sub-instruction files allow modular expansion"
    },
    {
      "id": "pm-agent-implementation",
      "description": "PM Agent for task tracking and process improvement",
      "status": "complete",
      "exit_condition": "PM_AGENT.md exists in MAIN/legacy-core/resources/agents/",
      "completed_at": "2026-01-22",
      "learnings": "PM Agent provides structure for documentation alignment checks"
    },
    {
      "id": "oni-layer-correction",
      "description": "Correct ONI layers: L1-L7 = OSI networking, L8 = Neural Gateway bridge, L9-L14 = Neural/Cognitive",
      "status": "complete",
      "exit_condition": "grep for 'L1.*Molecular' or 'L1.*Biology' returns 0 results; grep for 'L1.*Physical.*OSI' returns matches",
      "completed_at": "2026-01-22",
      "priority": "critical",
      "learnings": "Updated README.md, INDEX.md, TARA CLAUDE.md with corrected model. Key principle: OSI = how data moves; ONI = how meaning, trust, and control are enforced"
    },
    {
      "id": "siem-to-nsam-rename",
      "description": "Rename 'siem' directory to 'nsam' in TARA codebase",
      "status": "complete",
      "exit_condition": "No directory named 'siem' exists in MAIN/legacy-core/tara/",
      "completed_at": "2026-01-22",
      "priority": "high",
      "learnings": "Updated imports in __init__.py, cli.py, README.md, CLAUDE.md"
    },
    {
      "id": "oni-layers-reference",
      "description": "Create ONI_LAYERS.md as authoritative layer reference",
      "status": "complete",
      "exit_condition": "MAIN/legacy-core/ONI_LAYERS.md exists with complete 14-layer definitions",
      "completed_at": "2026-01-22",
      "priority": "high",
      "learnings": "Comprehensive reference with visual diagram, threat landscape, coherence score, external physical threats"
    },
    {
      "id": "nsam-external-threats",
      "description": "Document external BCI threats: MRI, magnets, trauma, EMP, RF interference",
      "status": "complete",
      "exit_condition": "External threat signatures documented in NSAM docs",
      "completed_at": "2026-01-22",
      "priority": "medium",
      "learnings": "Documented in ONI_LAYERS.md External Physical Threats section: MRI, EMI, trauma, jamming, ProxMark attacks, ESD"
    },
    {
      "id": "images-organization",
      "description": "Copy images to MAIN/legacy-core/resources/images/ and reference in READMEs",
      "status": "complete",
      "exit_condition": "Images exist in git and are displayed in README",
      "completed_at": "2026-01-22",
      "priority": "medium",
      "learnings": "Images copied: coherence-metric-*, neural-ransomware-kill-chain, oni-threat-defense-framework, scale-frequency-invariant, oni-logo"
    },
    {
      "id": "readme-privacy-statement",
      "description": "Add privacy/ethics statement to main README (NOT surveillance, FOR protection)",
      "status": "complete",
      "exit_condition": "README contains 'Privacy & Ethics' section with clear NOT surveillance statement",
      "completed_at": "2026-01-22",
      "priority": "critical",
      "learnings": "Added prominent Privacy & Ethics Statement section at top of README emphasizing: defense, protection, privacy preservation, availability, human sovereignty"
    },
    {
      "id": "hourglass-diagram-prompt",
      "description": "Create ChatGPT prompt for ONI hourglass visualization",
      "status": "complete",
      "exit_condition": "Prompt text documented for user to generate diagram",
      "completed_at": "2026-01-22",
      "priority": "low",
      "learnings": "Created MAIN/legacy-core/resources/images/CHATGPT_HOURGLASS_PROMPT.md with detailed prompts for image generation"
    },
    {
      "id": "related-work-documentation",
      "description": "Create RELATED_WORK.md documenting prior BCI security research and positioning ONI's contribution",
      "status": "complete",
      "exit_condition": "MAIN/legacy-core/RELATED_WORK.md exists with references; no 'first' or 'only' claims in existing docs",
      "completed_at": "2026-01-23",
      "priority": "high",
      "learnings": "Fixed claims in TechDoc-ONI_Framework.md and Blog-Neural_Firewall.md. Acknowledged Kohno 2009, IEEE standards, BCI Anonymizer, etc. ONI differs via OSI extension architecture, Coherence Metric, implementation focus."
    },
    {
      "id": "lazaro-munoz-consent-framework",
      "description": "Create INFORMED_CONSENT_FRAMEWORK.md based on Lázaro-Muñoz research",
      "status": "complete",
      "exit_condition": "MAIN/governance/INFORMED_CONSENT_FRAMEWORK.md exists with consent requirements",
      "completed_at": "2026-01-24",
      "priority": "high",
      "learnings": "Integrated 8 ethical themes from aDBS research (91% privacy concerns, 74% consent, 57% autonomy). Continuous consent model required for adaptive devices."
    },
    {
      "id": "lazaro-munoz-post-deployment",
      "description": "Create POST_DEPLOYMENT_ETHICS.md for device lifecycle management",
      "status": "complete",
      "exit_condition": "MAIN/governance/POST_DEPLOYMENT_ETHICS.md exists with lifecycle framework",
      "completed_at": "2026-01-24",
      "priority": "high",
      "learnings": "Post-trial access is ethically problematic when no alternatives exist. Device maintenance costs $10K+/year. No US requirements for post-trial services."
    },
    {
      "id": "lazaro-munoz-pediatric",
      "description": "Create PEDIATRIC_CONSIDERATIONS.md for minors and incapacity",
      "status": "complete",
      "exit_condition": "MAIN/governance/PEDIATRIC_CONSIDERATIONS.md exists with tri-level authorization model",
      "completed_at": "2026-01-24",
      "priority": "high",
      "learnings": "Don't treat minors as small adults. 4 pressing concerns: uncertainty (72%), decision-making roles (52%), information scarcity (52%), regulatory status (24%). Assent capacity concerns at 80%."
    },
    {
      "id": "lazaro-munoz-neuroethics-expansion",
      "description": "Expand NEUROETHICS_ALIGNMENT.md with stakeholder perspectives",
      "status": "complete",
      "exit_condition": "NEUROETHICS_ALIGNMENT.md contains Stakeholder Perspectives section with researcher concern percentages",
      "completed_at": "2026-01-24",
      "priority": "medium",
      "learnings": "Relational autonomy model: patients can identify caregivers for assistance. Multi-stakeholder decision-making is the norm, not exception."
    },
    {
      "id": "consent-validation-module",
      "description": "Implement consent.py module in oni/neurosecurity/",
      "status": "complete",
      "exit_condition": "oni/neurosecurity/consent.py exists with ConsentManager, ConsentValidator classes; exported in __init__.py",
      "completed_at": "2026-01-24",
      "priority": "high",
      "learnings": "ConsentState enum, PediatricConsentState for special populations, ConsentScope for operation authorization, ConsentRecord for audit trail."
    },
    {
      "id": "changelog-creation",
      "description": "Create CHANGELOG.md at repository root",
      "status": "pending",
      "exit_condition": "CHANGELOG.md exists with semantic versioning",
      "priority": "medium"
    },
    {
      "id": "python-code-sync",
      "description": "Verify oni-framework/oni/layers.py matches corrected ONI model",
      "status": "pending",
      "exit_condition": "Layer definitions in Python match corrected ONI (L1-L7 OSI, L8-L14 Neural)",
      "priority": "high"
    },
    {
      "id": "moabb-adapter-implementation",
      "description": "Create MOABB adapter for testing against real EEG datasets",
      "status": "complete",
      "exit_condition": "tara/data/moabb_adapter.py exists; exports in __init__.py; pyproject.toml has [moabb] optional dependency",
      "completed_at": "2026-01-24",
      "priority": "high",
      "learnings": "BSD 3-Clause license allows full integration. Created MOABBAdapter class with dataset loading, signal extraction, attack injection, and coherence benchmarking. Citation required: Jayaram & Barachant (2018)."
    },
    {
      "id": "moabb-coherence-benchmark",
      "description": "Benchmark coherence metric (Cₛ) accuracy against real MOABB EEG data",
      "status": "pending",
      "exit_condition": "Benchmark results documented with precision, recall, F1 scores for attack detection",
      "priority": "medium",
      "depends_on": ["moabb-adapter-implementation"]
    },
    {
      "id": "moabb-attack-scenarios",
      "description": "Create real-signal attack scenarios using MOABB data",
      "status": "pending",
      "exit_condition": "At least 3 attack scenarios tested with real EEG: spike injection, frequency hijacking, noise masking",
      "priority": "medium",
      "depends_on": ["moabb-adapter-implementation"]
    },
    {
      "id": "brainflow-integration",
      "description": "Add BrainFlow integration for real-time hardware support. BrainFlow provides uniform API for 20+ biosensor boards (OpenBCI, Muse, BrainBit, etc). Use as primary data acquisition layer for live Cₛ(S) computation.",
      "status": "pending",
      "exit_condition": "tara/data/brainflow_adapter.py exists with OpenBCI Cyton support; can stream live EEG into coherence pipeline",
      "priority": "high",
      "rationale": "Required data acquisition layer for layer-aware coherence metric implementation. BrainFlow supports 20+ boards with uniform API.",
      "depends_on": ["layer-aware-coherence-implementation"],
      "libraries": ["brainflow"],
      "notes": "BrainFlow is BSD-3 licensed. Supports Python, C++, Java, C#. Board-agnostic API means one adapter works for all supported hardware."
    },
    {
      "id": "layer-aware-coherence-implementation",
      "description": "Implement the unified layer-aware coherence metric Cₛ(S) in Python. Core equation: Cₛ(S) = e^(−Σ_f w(f,S)·(σ²φ(f) + σ²τ(f) + σ²γ(f))). Requires: (1) per-frequency STFT decomposition, (2) per-frequency variance computation for phase/transport/gain, (3) weighting function w(f,S) with configurable layer spatial scales, (4) real-time scoring pipeline. Use BrainFlow or Neuromore for data acquisition, MOABB for offline validation.",
      "status": "pending",
      "exit_condition": "oni/coherence.py exports LayerAwareCoherence class; computes Cₛ(S) on live or recorded EEG; validated against MOABB datasets with documented precision/recall",
      "priority": "high",
      "rationale": "The unified metric (Whitepaper §8) is currently theoretical. Implementation on real EEG data is the critical next step for framework credibility.",
      "depends_on": ["moabb-coherence-benchmark"],
      "libraries": ["brainflow", "neuromore", "mne-python", "scipy"],
      "subtasks": [
        "Implement per-frequency STFT pipeline (scipy.signal.stft)",
        "Compute σ²φ(f), σ²τ(f), σ²γ(f) from consecutive STFT windows",
        "Implement w(f,S) weighting function with configurable per-layer spatial scales",
        "Compute Cₛ(S) = e^(−Σ_f w(f,S)·σ²(f)) in real-time",
        "Calibrate weighting parameters (α, δ) against MOABB baseline data",
        "Benchmark: inject synthetic attacks, measure detection accuracy",
        "BrainFlow adapter for live streaming into the pipeline",
        "Neuromore integration for neurofeedback-style real-time display"
      ],
      "open_questions": [
        "What STFT window size balances temporal resolution vs frequency resolution?",
        "How to handle non-stationarity in neural signals (adaptive baseline)?",
        "Can w(f,S) be learned from data rather than manually specified?",
        "What is the minimum hardware latency for real-time Cₛ(S) on embedded systems?"
      ]
    },
    {
      "id": "neurosecurity-implementation",
      "description": "Implement Kohno (2009) neurosecurity principles and BCI Anonymizer (2014) patent in ONI codebase",
      "status": "complete",
      "exit_condition": "oni/neurosecurity/ module exists with firewall.py, anonymizer.py, threats.py, privacy_score.py; tests pass",
      "completed_at": "2026-01-23",
      "priority": "high",
      "learnings": "Implemented NeurosecurityFirewall (Kohno CIA triad), BCIAnonymizer (Chizeck patent), ThreatType enum, PrivacyScoreCalculator. Created NEUROSECURITY_IMPLEMENTATION.md with full integration guide. Key insight: Kohno's 3 threats (alteration, blocking, eavesdropping) map perfectly to ONI layers (L8-9 for integrity/availability, L13-14 for confidentiality)."
    },
    {
      "id": "project-management-system",
      "description": "Create comprehensive PM system with Kanban board, risk assessment, scope management, and tracking",
      "status": "complete",
      "exit_condition": "KANBAN.md and PROJECT_MANAGEMENT.md exist in project/ folder; INDEX.md references them",
      "completed_at": "2026-01-24",
      "priority": "medium",
      "learnings": "Created Risk Impact Assessment methodology (Likelihood × Impact matrix), Priority Framework (P0-P3), Scope Change Request process, and milestone roadmap. Kanban with WIP limits (3 in progress, 2 in review)."
    },
    {
      "id": "pm-hub-readme",
      "description": "Create centralized README.md dashboard for project/ folder with status tracking, quick links, and navigation",
      "status": "complete",
      "exit_condition": "MAIN/legacy-core/project/README.md exists with status dashboard, metrics, milestone overview, and links to all PM documents",
      "completed_at": "2026-01-26",
      "priority": "medium",
      "learnings": "Consolidated PM navigation into single dashboard. Progress bars and metrics at top for quick status. Links to detailed docs (KANBAN, prd.json, PROJECT_MANAGEMENT) for drill-down."
    },
    {
      "id": "github-pages-sri-fix",
      "description": "Fix SRI hash mismatch causing GitHub Pages black screen",
      "status": "complete",
      "exit_condition": "docs/index.html loads without errors; AOS animations work",
      "completed_at": "2026-01-26",
      "priority": "critical",
      "learnings": "SRI (Subresource Integrity) hashes must match actual file content. Incorrect hashes cause browser to block CDN scripts silently. AOS library elements with data-aos stay hidden (opacity:0) when library fails to load."
    },
    {
      "id": "pypi-security-scan",
      "description": "Run Bandit security scan on all PyPI packages and address findings",
      "status": "complete",
      "exit_condition": "Bandit scan passes with only acknowledged patterns (nosec annotations)",
      "completed_at": "2026-01-26",
      "priority": "high",
      "learnings": "Used # nosec annotations for reviewed patterns: B102 exec() for hardcoded examples, B110 try/except/pass for fault-tolerant callbacks, B311 random for UI jitter, B105 false positives."
    },
    {
      "id": "whitepaper-integration",
      "description": "Create ONI_Whitepaper.md and styled HTML whitepaper page for GitHub Pages. Update hero CTA from 'Try Interactive Demo' to 'Read Whitepaper'.",
      "status": "complete",
      "exit_condition": "ONI_Whitepaper.md exists in publications/0-oni-framework/; docs/whitepaper/index.html serves styled HTML version; hero CTA links to whitepaper",
      "completed_at": "2026-01-29",
      "priority": "high",
      "learnings": "Single-page HTML whitepaper with dark theme matching main site. 8 figures copied to both repo and docs paths. Floating TOC for navigation."
    },
    {
      "id": "mathematical-audit-corrections",
      "description": "Fix 3 mathematical inconsistencies identified by the Mathematical Audit: (1) Shannon entropy claim, (2) dispersion caveat for f×S, (3) zero entropy phrasing. Applied to both markdown and HTML whitepapers.",
      "status": "complete",
      "exit_condition": "No 'Shannon entropy' misattribution in Cₛ context; dispersion caveat present in f×S derivation; 'zero variance' replaces 'zero entropy'",
      "completed_at": "2026-01-29",
      "priority": "critical",
      "learnings": "Variance ≠ Shannon entropy. Cₛ exponent is a Boltzmann factor / Gaussian likelihood, not Shannon entropy. Neural tissue is dispersive (Cole-Cole model), so f×S is approximate. These corrections strengthen credibility."
    },
    {
      "id": "unified-layer-aware-coherence-section",
      "description": "Add Section 8 to whitepaper: 'The Unified Layer-Aware Coherence Metric' — unifies Cₛ and f×S into single metric Cₛ(S). Includes physics chain (Maxwell→Boltzmann→Nernst-Planck→Einstein→Hodgkin-Huxley→Cole-Cole→Fourier→Cₛ(S)), per-layer spatial scales, domain boundaries, and open research.",
      "status": "complete",
      "exit_condition": "Whitepaper Section 8 exists in both markdown and HTML with unified metric equation, physics chain table, and open research items",
      "completed_at": "2026-01-29",
      "priority": "high",
      "learnings": "The unified metric Cₛ(S) = e^(−Σ_f w(f,S)·σ²) addresses the gap between two separate checks. Physics chain establishes credibility by grounding in established science. Domain boundaries important: analog layers only (L1-L2, L8-L14), not digital (L3-L7)."
    },
    {
      "id": "equations-reference-document",
      "description": "Create TechDoc-Equations_Reference.md — master catalog of all 14 equations used in ONI, with status tracking (Established/Adapted/Proposed/Open), physics chain diagram, and 'What Is NOT Used' section.",
      "status": "complete",
      "exit_condition": "TechDoc-Equations_Reference.md exists in publications/mathematical-foundations/ with 14 equations, physics chain, exclusions section",
      "completed_at": "2026-01-29",
      "priority": "high",
      "learnings": "Tracking equation status (Established vs Proposed) is essential for academic credibility. What you exclude (Einstein relativity, Newton directly, Schrödinger) is as important as what you include."
    },
    {
      "id": "external-tools-reference",
      "description": "Create EXTERNAL_TOOLS.md — central catalog of all external tools, libraries, datasets, and standards used by ONI (BrainFlow, Neuromore, MNE-Python, MOABB, SciPy, Three.js, etc.).",
      "status": "complete",
      "exit_condition": "MAIN/legacy-core/resources/EXTERNAL_TOOLS.md exists with 10 sections covering signal processing, benchmarking, visualization, security, ML, physics references, CI/CD, hardware targets, standards",
      "completed_at": "2026-01-29",
      "priority": "medium",
      "learnings": "Centralizing tool references prevents fragmentation across documentation. Integration status tracking (Integrated/Planned/Evaluated/Reference) clarifies development roadmap."
    },
    {
      "id": "github-pages-resources-update",
      "description": "Add 4 new resource cards to GitHub Pages Documentation & Resources section: Equations Reference, External Tools, Mathematical Audit, and reorganized navigation.",
      "status": "complete",
      "exit_condition": "docs/index.html Documentation & Resources grid contains 10 cards (6 original + 4 new)",
      "completed_at": "2026-01-29",
      "priority": "medium",
      "learnings": "Resource cards with short icon abbreviations (Eq, Lib, Au) work well for compact display in the grid layout."
    },
    {
      "id": "immersive-3d-whitepaper-ui",
      "description": "Create immersive 3D reading experience for QIF whitepaper: 9 CSS visual effects (curved monitor, glassmorphism, aurora gradient, floating particles, depth-of-field blur, scroll reveals, neumorphic separators, noise texture, parallax depth) plus scroll-linked JS engine",
      "status": "complete",
      "exit_condition": "qif-immersive.css and qif-immersive.js exist; _quarto.yml references both; all effects respect prefers-reduced-motion",
      "completed_at": "2026-02-02",
      "priority": "high",
      "learnings": "CSS perspective + rotateY creates convincing curved monitor effect. IntersectionObserver at 20% threshold gives smooth section reveals. SVG feTurbulence for noise grain is lightweight and effective. All effects must check prefers-reduced-motion."
    },
    {
      "id": "plotly-interactive-figures",
      "description": "Migrate all whitepaper matplotlib figures to interactive Plotly for HTML output. 14 figures across index.qmd, ch06, ch07, ch12. Matplotlib retained as PDF fallback via _USE_PLOTLY conditional.",
      "status": "complete",
      "exit_condition": "_USE_PLOTLY detection in setup block; all figures have if/else for Plotly vs matplotlib; Plotly CDN loaded via include-in-header with SRI",
      "completed_at": "2026-02-02",
      "priority": "high",
      "learnings": "Plotly in self-contained Quarto works via include-in-header script tag. Dark template needs transparent paper_bgcolor for theme integration. go.Surface for 3D coherence, go.Heatmap for sensitivity analysis. Format detection via QUARTO_FIG_FORMAT env var."
    },
    {
      "id": "auto-dictation-engine",
      "description": "Implement Web Speech API auto-dictation: scroll-triggered section narration, toggle button with glassmorphism styling, voice selection popover, Alt+D shortcut, localStorage persistence, privacy disclosure",
      "status": "complete",
      "exit_condition": "Dictation toggle visible in bottom-right; Alt+D toggles; sections read aloud on scroll; code blocks and tables stripped from narration; localService preference set",
      "completed_at": "2026-02-02",
      "priority": "medium",
      "learnings": "extractReadableText via clone + remove (code, table, .katex) then textContent is safe and effective. IntersectionObserver rootMargin '-30% 0px -30% 0px' targets center viewport. Voice preference: 'Google UK English Female', 'Samantha', 'Daniel'."
    },
    {
      "id": "security-hardening-all-sites",
      "description": "Security harden QIF whitepaper and both GitHub Pages sites (qinnovates.github.io, mindloft/main/docs). CSP meta tags, SRI hashes on all CDN scripts (Three.js, GSAP, ScrollTrigger, Plotly), X-Content-Type-Options, X-Frame-Options, referrer policy. Zero innerHTML in all custom JS.",
      "status": "complete",
      "exit_condition": "CSP meta tag on all 3 HTML entry points; SRI on all CDN script tags; X-Frame-Options DENY; no innerHTML in qif-immersive.js",
      "completed_at": "2026-02-02",
      "priority": "critical",
      "learnings": "GitHub Pages cannot set HTTP headers — must use meta http-equiv. SRI hashes generated via curl | openssl dgst -sha384 -binary | openssl base64 -A. Pinning CDN versions is essential for SRI to work."
    },
    {
      "id": "qif-neuroethics-document",
      "description": "Create QIF-NEUROETHICS.md — living document of 11 open ethical questions for quantum biometric governance. Covers HIPAA, GDPR, CCPA/CPRA, BIPA, EU AI Act, Chile Neurorights, UNESCO, OECD, and 9 more regulatory frameworks. Foundation for admissions paper thesis.",
      "status": "complete",
      "exit_condition": "QIF-NEUROETHICS.md exists in drafts/ai-working/ with 11 numbered questions, regulatory analysis, admissions paper structure, thesis statement",
      "completed_at": "2026-02-02",
      "priority": "high",
      "learnings": "Quantum biometric data creates a regulatory gap — no existing framework (HIPAA, GDPR, etc.) addresses quantum-level neural signatures. The no-cloning theorem creates a unique property right argument. Multi-stakeholder collaboration table with 20+ entities is essential for standards development."
    },
    {
      "id": "qif-lab-readme",
      "description": "Create qif-lab/README.md documenting the as-code whitepaper system: quick start, prerequisites, render commands, architecture diagram, collaboration instructions for researchers/ethicists/experimentalists/engineers, interactive features, security, citation",
      "status": "complete",
      "exit_condition": "qif-lab/README.md exists with architecture diagram, collaboration sections, security documentation, BibTeX citation",
      "completed_at": "2026-02-02",
      "priority": "medium",
      "learnings": "README should emphasize the as-code principle — change equations, re-render, paper updates. 5 testable predictions are the best hook for experimentalists."
    },
    {
      "id": "kokoro-tts-audio-narration",
      "description": "Pre-generate per-section audio narration using Kokoro TTS (Apache 2.0, 82M params). 16 sections extracted from rendered HTML via BeautifulSoup, text cleaned (strips code, tables, math, figures), narrated with af_heart voice, output as MP3. Audio player UI with play/pause, progress bar, section title, scroll-linked auto-advance via IntersectionObserver.",
      "status": "complete",
      "exit_condition": "audio/ directory contains 16 MP3 files + manifest.json; audio player visible in whitepaper; scroll auto-advances to current section",
      "completed_at": "2026-02-02",
      "priority": "high",
      "learnings": "Kokoro TTS (Apache 2.0) is the best open-source option for human-sounding speech — CPU-friendly, 82M params, sub-0.3s latency. generate_audio.py extracts text via BeautifulSoup clone+decompose pattern (safe, no innerHTML). WAV→MP3 via ffmpeg reduces 25MB to 8.4MB. Audio player uses HTML5 Audio API with IntersectionObserver for scroll-linked playback."
    },
    {
      "id": "hourglass-scroll-effect",
      "description": "Replace whole-page rotateY curved monitor effect with per-section hourglass perspective. Each section gets rotateX based on viewport position — content at top/bottom edges fans outward (±3deg max) while center stays flat. Quadratic easing, subtle scale (min 0.982), translateZ push-back (max -12px). Respects prefers-reduced-motion.",
      "status": "complete",
      "exit_condition": "Sections near viewport edges tilt outward; center sections stay flat; effect is subtle and legible; prefers-reduced-motion disables it",
      "completed_at": "2026-02-02",
      "priority": "medium",
      "learnings": "Per-section transforms via getBoundingClientRect() + requestAnimationFrame give smooth performance. Quadratic easing (t*t) feels more natural than linear. Max ±3deg rotation keeps text legible while creating depth. The 'hourglass' metaphor (content fans outward at edges) is more comfortable than diagonal tilt."
    },
    {
      "id": "collapsible-callouts",
      "description": "Make all Quarto .callout boxes click-to-expand/collapse with visual hint labels. Callouts start collapsed showing only header. Click toggles smooth max-height animation. Arrow indicator rotates on expand. 'Click to expand/collapse' hint text updates dynamically.",
      "status": "complete",
      "exit_condition": "All .callout elements are collapsible; click toggles open/close; arrow rotates; hint text updates; AI Transparency Disclosure starts collapsed",
      "completed_at": "2026-02-02",
      "priority": "medium",
      "learnings": "CSS max-height transitions with overflow:hidden create smooth expand/collapse. Using a large max-height value (2000px) for expanded state avoids needing to measure content. Arrow rotation via CSS transform: rotate(90deg) on .qif-collapse-arrow. classList.toggle is cleaner than manual add/remove."
    },
    {
      "id": "qif-field-journal",
      "description": "Create QIF-FIELD-JOURNAL.md — first-person research journal for personal epiphanies, synesthesia observations, and neurodivergent experiences. Entry format with date, title, observation, internal state, QIF connection, and open questions. First entry documents synesthesia changes during QIF visualization work. Published to both drafts and main repo for public visibility.",
      "status": "complete",
      "exit_condition": "QIF-FIELD-JOURNAL.md exists in both drafts/ai-working/ and main/MAIN/qif/; Entry 001 documents synesthesia breakthrough; Claude reminder protocol added to CLAUDE.md",
      "completed_at": "2026-02-02",
      "priority": "high",
      "learnings": "Field notes serve dual purpose: personal journal AND public research artifact. The 'When to Write' guide (7 signal types) helps identify capture-worthy moments. Adding a Claude reminder protocol ('Anything surprise you about your own thinking lately?') ensures the journal keeps growing across sessions."
    },
    {
      "id": "dynamic-roadmap-github-pages",
      "description": "Add dynamic progress tracker to GitHub Pages landing page that fetches prd.json from GitHub raw URL and renders: animated progress bar, 4 stat counters (total/complete/pending/rate), and 5 most recent completions. All DOM created via createElement (zero innerHTML). Graceful fallback if fetch fails.",
      "status": "complete",
      "exit_condition": "Progress bar visible on GitHub Pages; stats update from prd.json; recent completions listed; no innerHTML in implementation",
      "completed_at": "2026-02-02",
      "priority": "medium",
      "learnings": "GitHub Pages can't run server-side code, but fetching raw JSON from GitHub API works for dynamic content. createElement-only DOM construction is safer than innerHTML. Progress bar CSS animation (width transition) gives polished feel. Fallback text prevents blank section if API rate-limited."
    },
    {
      "id": "whitepaper-makefile-pipeline",
      "description": "Create Makefile for one-command whitepaper build: render (quarto render .qmd), audio (generate_audio.py with Kokoro TTS), mp3 (ffmpeg WAV→MP3 conversion + manifest update), deploy (copy to GitHub Pages docs/). Voice configurable via VOICE= variable.",
      "status": "complete",
      "exit_condition": "make whitepaper runs full pipeline; make deploy copies to docs/whitepaper/; make clean removes generated files; VOICE= variable works",
      "completed_at": "2026-02-02",
      "priority": "medium",
      "learnings": "Makefile targets with dependencies (audio: render) ensure correct ordering. Inline Python in Makefile (python3 -c) works for manifest JSON updates. ffmpeg -y flag prevents interactive prompts. The deploy target copies HTML + audio + manifest to the GitHub Pages directory."
    }
  ],

  "future_work": [
    {
      "id": "epic-federated-ai-training",
      "title": "Federated AI Training for Privacy-Preserving Neural Security",
      "type": "epic",
      "status": "in-progress",
      "started_at": "2026-01-26",
      "description": "Implement federated learning architecture where AI models train locally on user devices, sharing only encrypted gradients with central servers. TARA portal receives only mathematical scores (Cₛ, Δ, σ)—never raw neural data. This enables collective learning while preserving individual privacy.",
      "rationale": "Current centralized ML approaches require raw data transmission, creating privacy risks. Federated learning enables model improvement without data exposure. This aligns with ONI's core principle: your thoughts stay on your device.",
      "feasibility": "in-progress",
      "components": [
        {
          "id": "fl-local-training-module",
          "title": "Local Training Module",
          "description": "On-device model training using TensorFlow Federated or PySyft",
          "status": "backlogged",
          "notes": "Requires significant infrastructure - defer to future phase"
        },
        {
          "id": "fl-gradient-encryption",
          "title": "Gradient Encryption Layer",
          "description": "Homomorphic encryption or secure aggregation for gradient sharing",
          "status": "backlogged",
          "notes": "Dependent on fl-local-training-module"
        },
        {
          "id": "fl-differential-privacy",
          "title": "Differential Privacy Integration",
          "description": "Add calibrated Laplacian noise to Cₛ scores: Cₛ' = Cₛ + Lap(1/ε). Default ε ≈ 1.0 balances privacy and utility.",
          "status": "not-started",
          "notes": "Can implement for score anonymization independent of federated learning"
        },
        {
          "id": "fl-score-only-transmission",
          "title": "Score-Only Transmission Protocol",
          "description": "Ensure only Cₛ scores, deltas, and deviations are transmitted to TARA",
          "status": "design-complete",
          "notes": "Architecture documented, visualization created, FAQ written"
        },
        {
          "id": "fl-aggregation-server",
          "title": "Secure Aggregation Server",
          "description": "Central server that combines encrypted gradients without seeing individual updates",
          "status": "backlogged",
          "notes": "Dependent on fl-local-training-module and fl-gradient-encryption"
        },
        {
          "id": "fl-score-anonymization",
          "title": "Score Anonymization Layer",
          "description": "Prevent Cₛ fingerprinting via: (1) differential privacy noise injection, (2) bucketed transmission (LOW/MED/HIGH), (3) temporal aggregation windows, (4) session unlinkability with rotating pseudonyms",
          "status": "design-complete",
          "priority": "critical",
          "rationale": "Raw Cₛ time-series can fingerprint users even without neural data",
          "notes": "Vulnerability documented, mitigations specified in DATA_POLICY_FAQ.md and visualization"
        }
      ],
      "technical_approach": {
        "framework": "TensorFlow Federated or PySyft",
        "encryption": "Homomorphic encryption (CKKS scheme) for gradient protection",
        "privacy_budget": "Differential privacy with configurable ε (epsilon)",
        "aggregation": "Secure aggregation protocol (Bonawitz et al., 2017)"
      },
      "research_questions": [
        "What's the minimum data needed for effective local training?",
        "How to handle non-IID neural data distributions across users?",
        "What privacy budget (ε) balances utility vs privacy?",
        "How to detect and handle Byzantine/malicious participants?",
        "Can model updates leak information about neural patterns?",
        "Can Cₛ score time-series be used for user fingerprinting/re-identification?"
      ],
      "known_vulnerabilities": {
        "score_fingerprinting": {
          "description": "Cₛ scores over time may create identifiable patterns unique to each user",
          "risk": "Re-identification, activity inference, neural fingerprinting",
          "mitigations": [
            "Differential privacy on scores (calibrated noise before transmission)",
            "Bucketed/quantized transmission (e.g., LOW/MEDIUM/HIGH instead of 0.847)",
            "Temporal aggregation (transmit windowed averages, not individual readings)",
            "k-anonymity enforcement (only transmit when indistinguishable from k-1 others)",
            "Session unlinkability (rotating pseudonyms per session)"
          ]
        }
      },
      "references": [
        "McMahan et al. (2017) - Communication-Efficient Learning of Deep Networks from Decentralized Data",
        "Bonawitz et al. (2017) - Practical Secure Aggregation for Privacy-Preserving Machine Learning",
        "Abadi et al. (2016) - Deep Learning with Differential Privacy",
        "Geiping et al. (2020) - Inverting Gradients - How easy is it to break privacy in federated learning?"
      ],
      "estimated_effort": "large",
      "timeline": "6-12 months for MVP"
    },
    {
      "id": "future-neural-consent-publication",
      "title": "Neural Consent Publication Topic",
      "description": "Create publications/neural-consent/ with Blog and TechDoc on consent architecture for BCIs",
      "rationale": "Consolidate Lázaro-Muñoz framework integration into publishable content",
      "feasibility": "practical",
      "prerequisites": [
        "INFORMED_CONSENT_FRAMEWORK.md complete",
        "consent.py module implemented",
        "Stakeholder perspectives documented"
      ],
      "estimated_effort": "medium"
    },
    {
      "id": "future-ai-attack-prediction",
      "title": "AI-Based Attack Vector Prediction",
      "description": "Train AI models to predict future BCI attack vectors using ONI framework, biology, physics data",
      "rationale": "Proactive defense requires anticipating attacks before they occur",
      "feasibility": "research-needed",
      "prerequisites": [
        "Comprehensive attack pattern database",
        "Historical BCI incident data (FDA MAUDE, published research)",
        "Biological signal baseline datasets",
        "Physics models of neural interface behavior"
      ],
      "research_questions": [
        "What data points are needed for training?",
        "Can models self-iterate to discover new attack patterns?",
        "What's theoretical vs practical with current ML?",
        "How to validate predictions ethically?"
      ],
      "limitations": [
        "Limited real-world BCI attack data",
        "Ethical constraints on testing",
        "Hardware-specific vulnerabilities vary",
        "BCI technology evolving rapidly"
      ],
      "estimated_effort": "large"
    },
    {
      "id": "future-blog-paper-updates",
      "title": "Update Existing Blogs and Papers",
      "description": "Go back and update all existing blog posts and technical papers with corrected ONI layer model",
      "documents_to_update": [
        "MAIN/legacy-core/publications/0-oni-framework/",
        "MAIN/legacy-core/publications/coherence-metric/",
        "MAIN/legacy-core/publications/neural-firewall/",
        "MAIN/legacy-core/publications/neural-ransomware/",
        "Medium blog posts (external)"
      ],
      "feasibility": "practical",
      "estimated_effort": "medium"
    },
    {
      "id": "future-l11-l14-standards-development",
      "title": "L11-L14 Standards Development",
      "description": "Develop governance and standards alignment for Layers 11-14 (Cognitive Transport, Cognitive Session, Semantic Layer, Identity Layer). Unlike L1-L7 (IEEE, IETF) and L8-L10 (IEC 62443, FDA guidance), no established standards currently exist for cognitive and identity-layer security. Requires collaboration with Subject Matter Experts (neuroethicists, cognitive scientists, BCI researchers) and engagement with governing agencies (FDA, EU MDR, IEEE emerging working groups, UNESCO/OECD neuroethics initiatives).",
      "rationale": "ONI_LAYERS.md Section 4 'Standards Alignment' notes L11-L14 depend on 'Emerging neuroethics frameworks' which are not yet mature. Framework adoption requires actionable standards at all layers.",
      "feasibility": "blocked-external",
      "blockers": [
        "No mature international standards for cognitive-layer BCI security",
        "Neuroethics governance frameworks still emerging (UNESCO, OECD)",
        "IEEE and other standards bodies have not yet addressed L11-L14 scope",
        "Requires multi-stakeholder coordination beyond single-project scope"
      ],
      "required_input": {
        "subject_matter_experts": [
          "Neuroethicists (e.g., NIH BRAIN Initiative ethics working groups)",
          "Cognitive scientists specializing in BCI",
          "BCI security researchers (academic and industry)"
        ],
        "governing_agencies": [
          "FDA (neural device guidance evolution)",
          "EU MDR (medical device regulation)",
          "IEEE (emerging neural interface standards)",
          "UNESCO (neurorights and neuroethics)",
          "OECD (responsible AI/neural interface principles)"
        ]
      },
      "actions_when_unblocked": [
        "Monitor emerging neuroethics frameworks from UNESCO, OECD, IEEE",
        "Engage with standards bodies when L11-L14 guidelines emerge",
        "Contribute ONI framework principles to standards development efforts",
        "Map ONI L11-L14 to emerging standards as they mature"
      ],
      "estimated_effort": "large",
      "timeline": "external-dependent"
    },
    {
      "id": "future-problem-with-bcis",
      "title": "The Problem with BCIs: Attack Surfaces Beyond Electrical Monitoring",
      "type": "research",
      "status": "backlog",
      "description": "Research and develop devices/methods that can monitor and protect neural systems at layers that current BCI electrodes cannot access. Electrodes can only interact at the millisecond-scale electrical signaling layer—they cannot detect or address molecular substrate attacks (nutritional depletion, enzymatic inhibition, receptor antagonism) or faster processes (femtosecond enzyme kinetics, nanosecond ion channel gating).",
      "rationale": "Current BCIs have a fundamental blind spot: they monitor electrical activity but cannot detect biochemical attacks. An attacker could deplete iron (blocking dopamine synthesis), antagonize receptors (blocking neurotransmitter effects), or poison enzymes (halting production)—and the BCI would only see 'reduced signaling' without understanding the cause. This is a critical gap in neural security.",
      "research_questions": [
        "What sensing modalities can detect molecular-layer attacks? (spectroscopy, metabolomics, microfluidics)",
        "Can implantable biosensors monitor cofactor levels (iron, BH4, B6) in real-time?",
        "How can we integrate biochemical sensing with electrical BCI interfaces?",
        "What is the minimum viable sensor array for comprehensive neural security?",
        "Can we detect receptor binding state changes non-invasively?",
        "What time-scale gaps exist between molecular events and electrical detection?"
      ],
      "key_examples": [
        {
          "attack": "Iron depletion",
          "target": "Tyrosine hydroxylase in substantia nigra",
          "effect": "Dopamine synthesis blocked",
          "bci_detection": "Sees reduced striatal signaling, cannot identify cause"
        },
        {
          "attack": "Adenosine receptor agonism",
          "target": "A2A receptors in nucleus accumbens shell",
          "effect": "Excessive drowsiness/sedation",
          "bci_detection": "Sees normal firing patterns, cannot detect receptor state"
        },
        {
          "attack": "B6 depletion",
          "target": "Glutamic acid decarboxylase (GABA synthesis)",
          "effect": "Seizures due to reduced inhibition",
          "bci_detection": "Detects abnormal activity but not root cause"
        }
      ],
      "potential_solutions": [
        "Implantable spectroscopic sensors for cofactor detection",
        "Microfluidic sampling for real-time metabolomics",
        "Optogenetic reporters for neurotransmitter levels",
        "Integrated multi-modal sensing (electrical + optical + chemical)",
        "External wearable metabolic monitors (non-invasive biomarkers)"
      ],
      "references": [
        "Matak et al. (2016) - Iron deficiency causes dopaminergic neurodegeneration (PNAS)",
        "Lazarus et al. (2011) - Caffeine/adenosine in nucleus accumbens (J Neurosci)",
        "Nagatsu (2016) - Tyrosine hydroxylase cofactor requirements",
        "Thöny et al. (2000) - BH4 biosynthesis and regeneration"
      ],
      "deliverables": [
        {
          "id": "blog-problem-with-bcis",
          "type": "blog",
          "title": "The Problem with BCIs: Why Your Brain Implant Can't See Everything",
          "template": "MAIN/legacy-core/resources/templates/BLOG_TEMPLATE.md",
          "status": "backlog"
        },
        {
          "id": "techdoc-bci-blind-spots",
          "type": "techdoc",
          "title": "BCI Blind Spots: Attack Surfaces Beyond Electrical Monitoring",
          "template": "MAIN/legacy-core/resources/templates/TECHDOC_TEMPLATE_APA.md",
          "status": "backlog"
        }
      ],
      "feasibility": "research-needed",
      "estimated_effort": "large",
      "timeline": "12-24 months"
    },
    {
      "id": "future-academic-discoverability",
      "title": "Academic Discoverability & SEO for Research",
      "type": "infrastructure",
      "status": "backlog",
      "description": "Implement academic metadata and structured data to maximize discoverability by Google Scholar, Semantic Scholar, and research databases. Does NOT involve AI scrapers (GPTBot, CCBot, etc.) — those remain blocked.",
      "rationale": "Academic visibility requires proper metadata, not AI crawler access. Google Scholar uses citation meta tags. Semantic Scholar indexes via ORCID/DOI. These are the real levers for research discoverability.",
      "deliverables": [
        {
          "id": "citation-meta-tags",
          "title": "Add Google Scholar citation meta tags",
          "description": "Add <meta name=\"citation_*\"> tags to whitepaper HTML: citation_title, citation_author, citation_publication_date, citation_pdf_url, citation_abstract, citation_keywords",
          "status": "backlog"
        },
        {
          "id": "schema-markup",
          "title": "Add JSON-LD ScholarlyArticle schema",
          "description": "Add structured data markup for ScholarlyArticle type to whitepaper pages for rich search results",
          "status": "backlog"
        },
        {
          "id": "zenodo-doi",
          "title": "Get DOI via Zenodo",
          "description": "Upload whitepaper to Zenodo (free) to get a citable DOI. Link DOI in citation meta tags.",
          "status": "backlog"
        },
        {
          "id": "orcid-profile",
          "title": "Create/link ORCID researcher profile",
          "description": "Create ORCID profile, link all publications for unified researcher identity",
          "status": "backlog"
        },
        {
          "id": "semantic-scholar-submission",
          "title": "Submit to Semantic Scholar",
          "description": "Submit whitepaper PDF directly to Semantic Scholar for indexing",
          "status": "backlog"
        },
        {
          "id": "arxiv-preprint",
          "title": "Consider arXiv/SSRN preprint",
          "description": "Evaluate submitting QIF whitepaper as preprint to arXiv (cs.CR) or SSRN for academic reach",
          "status": "backlog"
        }
      ],
      "prerequisites": [
        "QIF whitepaper finalized",
        "Framework equations validated",
        "At least one experimental result documented"
      ],
      "feasibility": "practical",
      "estimated_effort": "small",
      "timeline": "1-2 weeks after framework finalization"
    }
  ],

  "process_improvements": [
    {
      "id": "improvement-oni-consistency",
      "observation": "ONI layer model was inconsistent - biology was leaking into OSI layers",
      "improvement": "Create ONI_LAYERS.md as single source of truth, validate with grep",
      "status": "implemented",
      "impact": "critical"
    },
    {
      "id": "improvement-pm-agent",
      "observation": "No structured task tracking existed",
      "improvement": "Created PM Agent and enhanced prd.json",
      "status": "implemented",
      "impact": "high"
    }
  ],

  "metrics": {
    "total_tasks": 46,
    "completed": 40,
    "in_progress": 0,
    "pending": 6,
    "completion_rate": "87%"
  }
}
