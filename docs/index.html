<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ONI | Neurosecurity Standards for Brain-Computer Interfaces</title>
    <meta name="description" content="BCIs are being implanted in humans today â€” with no security standard. ONI is building one. 14 layers extending OSI into the biological domain.">
    <meta name="keywords" content="neurosecurity, neural interface, brain-computer interface, ONI model, neural security standard, neuroethics">

    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://unpkg.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; img-src 'self' https: data:; connect-src 'self' https://raw.githubusercontent.com https://api.github.com; font-src 'self' https://fonts.gstatic.com;">

    <!-- Open Graph -->
    <meta property="og:title" content="ONI | Neurosecurity Standards for BCIs">
    <meta property="og:description" content="The neural security standard. 14 layers extending OSI to protect brain-computer interfaces.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://qikevinl.github.io/ONI/">
    <meta property="og:image" content="https://qikevinl.github.io/ONI/images/ONI_Banner_Logo.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Three.js -->
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>

    <!-- GSAP + ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <style>
        /* ============================================
           CSS RESET & VARIABLES
           ============================================ */
        :root {
            --bg-deep: #050a14;
            --bg-primary: #0a0f1a;
            --bg-card: rgba(15, 23, 42, 0.7);
            --bg-card-hover: rgba(20, 30, 50, 0.85);
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-cyan: #06b6d4;
            --accent-amber: #f59e0b;
            --accent-green: #10b981;
            --accent-pink: #ec4899;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --text-dim: #475569;
            --border: rgba(30, 41, 59, 0.8);
            --gradient-blue-purple: linear-gradient(135deg, #3b82f6, #8b5cf6);
            --gradient-blue-cyan: linear-gradient(135deg, #3b82f6, #06b6d4);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html {
            scroll-behavior: smooth;
            background: var(--bg-deep);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-deep);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* ============================================
           NAVIGATION
           ============================================ */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 0 2rem;
            height: 64px;
            display: flex;
            align-items: center;
            background: rgba(5, 10, 20, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(30, 41, 59, 0.4);
            transition: background 0.3s, border-color 0.3s;
        }

        nav.scrolled {
            background: rgba(5, 10, 20, 0.95);
            border-bottom-color: rgba(30, 41, 59, 0.7);
        }

        .nav-inner {
            max-width: 1280px;
            margin: 0 auto;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            font-size: 1.35rem;
            font-weight: 700;
            color: var(--text-primary);
            text-decoration: none;
            letter-spacing: -0.02em;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            transition: color 0.2s;
            position: relative;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--text-primary);
        }

        .nav-links a.active::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--accent-blue);
            border-radius: 1px;
        }

        .nav-github {
            display: flex;
            align-items: center;
            color: var(--text-muted) !important;
            transition: color 0.2s;
        }

        .nav-github:hover { color: var(--text-primary) !important; }

        .nav-github svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        /* Mobile hamburger */
        .nav-hamburger {
            display: none;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px;
        }

        .nav-hamburger svg {
            width: 24px;
            height: 24px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
        }

        .nav-mobile-menu {
            display: none;
            position: fixed;
            top: 64px;
            left: 0;
            right: 0;
            background: rgba(5, 10, 20, 0.98);
            backdrop-filter: blur(20px);
            padding: 1rem 2rem 2rem;
            border-bottom: 1px solid var(--border);
            z-index: 999;
        }

        .nav-mobile-menu.open { display: flex; flex-direction: column; gap: 1rem; }

        .nav-mobile-menu a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 1rem;
            font-weight: 500;
            padding: 0.5rem 0;
        }

        @media (max-width: 768px) {
            .nav-links { display: none; }
            .nav-hamburger { display: block; }
        }

        /* ============================================
           SCENE SHARED STYLES
           ============================================ */
        .scene {
            position: relative;
            overflow: hidden;
        }

        .scene-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .section-label {
            font-size: 0.75rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--accent-blue);
            font-weight: 600;
            margin-bottom: 1rem;
        }

        /* ============================================
           SCENE 1: HERO
           ============================================ */
        #scene-hero {
            height: 100vh;
            min-height: 700px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        #three-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 0;
            pointer-events: none;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            max-width: 900px;
            padding: 0 2rem;
        }

        .hero-mission {
            font-size: clamp(0.95rem, 1.8vw, 1.15rem);
            color: var(--text-secondary);
            font-weight: 400;
            line-height: 1.7;
            max-width: 620px;
            margin: 0 auto 1.75rem;
            opacity: 0;
        }

        .hero-mission em {
            color: var(--text-primary);
            font-style: normal;
            font-weight: 500;
        }

        .hero-label {
            font-size: 0.75rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: #d4a543;
            font-weight: 600;
            margin-bottom: 1.5rem;
            opacity: 0;
        }

        .hero-title {
            font-size: clamp(2.5rem, 5.5vw, 4.5rem);
            font-weight: 800;
            letter-spacing: -0.03em;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }

        .hero-title .word {
            display: inline-block;
            opacity: 0;
            transform: translateY(20px);
        }

        .hero-subtitle {
            font-size: clamp(1rem, 2vw, 1.35rem);
            color: var(--text-primary);
            font-weight: 400;
            max-width: 650px;
            margin: 0 auto 2.5rem;
            line-height: 1.6;
            opacity: 0;
        }

        .hero-cta {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            background: #000000;
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            border-radius: 100px;
            transition: all 0.3s;
            opacity: 0;
        }

        .hero-cta:hover {
            background: #111111;
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
        }

        .hero-scroll-indicator {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2;
            opacity: 0;
            animation: float-bounce 2s ease-in-out infinite;
        }

        @keyframes float-bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(8px); }
        }

        .hero-scroll-text {
            display: block;
            font-size: 0.7rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-top: 0.5rem;
            text-align: center;
        }

        .hero-scroll-indicator svg {
            width: 24px;
            height: 24px;
            stroke: var(--text-dim);
            fill: none;
            stroke-width: 2;
        }

        /* ============================================
           SCENE 2: THE PROBLEM
           ============================================ */
        #scene-problem {
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding: 8rem 0;
            position: relative;
            z-index: 1;
            background: linear-gradient(180deg,
                rgba(5, 10, 20, 0) 0%,
                rgba(5, 10, 20, 1) 15%,
                rgba(5, 10, 20, 1) 85%,
                rgba(5, 10, 20, 0) 100%);
        }

        .problem-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6rem;
            align-items: center;
        }

        .problem-text h2 {
            font-size: clamp(2rem, 3.5vw, 3rem);
            font-weight: 700;
            letter-spacing: -0.02em;
            line-height: 1.15;
            margin-bottom: 1.5rem;
        }

        .problem-text p {
            color: var(--text-secondary);
            font-size: 1.05rem;
            line-height: 1.7;
            max-width: 520px;
        }

        .problem-stats {
            display: flex;
            flex-direction: column;
            gap: 3rem;
        }

        .stat-item {
            opacity: 0;
            transform: translateX(30px);
        }

        .stat-number {
            font-size: clamp(3rem, 5vw, 4.5rem);
            font-weight: 800;
            letter-spacing: -0.03em;
            line-height: 1;
            margin-bottom: 0.25rem;
        }

        .stat-number.blue {
            background: var(--gradient-blue-purple);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-number.amber {
            color: var(--accent-amber);
        }

        .stat-number.red {
            color: #ef4444;
        }

        .stat-desc {
            font-size: 0.95rem;
            color: var(--text-muted);
        }

        /* ============================================
           SCENE 3: THE FRAMEWORK (Sticky Scroll)
           ============================================ */
        #scene-framework {
            position: relative;
            z-index: 1;
            background: var(--bg-deep);
        }

        .framework-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            min-height: 100vh;
        }

        .framework-text-track {
            padding: 6rem 0;
        }

        .framework-panel {
            min-height: 60vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 2rem 0;
        }

        .framework-panel.layer-panel {
            min-height: 40vh;
        }

        .framework-panel.layer-panel[data-layer="L8"] {
            min-height: 55vh;
        }

        .framework-panel.closing-panel {
            min-height: 50vh;
        }

        .framework-panel h3 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 1rem;
            letter-spacing: -0.01em;
        }

        .framework-panel p {
            color: var(--text-secondary);
            font-size: 1rem;
            line-height: 1.7;
            max-width: 480px;
        }

        .framework-panel .formula {
            font-family: 'Inter', monospace;
            font-size: 1.1rem;
            color: var(--accent-amber);
            background: rgba(245, 158, 11, 0.08);
            border: 1px solid rgba(245, 158, 11, 0.2);
            padding: 0.75rem 1.25rem;
            border-radius: 8px;
            display: inline-block;
            margin-top: 1rem;
        }

        .framework-panel .zone-accent {
            display: inline-block;
            padding: 0.2rem 0.75rem;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }

        .zone-accent.silicon { background: rgba(59,130,246,0.12); color: #60a5fa; }
        .zone-accent.gateway { background: rgba(245,158,11,0.12); color: #fbbf24; }
        .zone-accent.biology { background: rgba(16,185,129,0.12); color: #34d399; }

        .layer-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .layer-badge {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 700;
            letter-spacing: 0.05em;
            flex-shrink: 0;
        }
        .layer-badge.silicon { background: rgba(59,130,246,0.15); color: var(--accent-blue); }
        .layer-badge.gateway { background: rgba(245,158,11,0.15); color: var(--accent-amber); }
        .layer-badge.biology { background: rgba(16,185,129,0.15); color: var(--accent-green); }

        .layer-name {
            font-size: 1.4rem;
            font-weight: 700;
        }

        .layer-desc {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.7;
            max-width: 440px;
        }

        .layer-context {
            margin-top: 0.75rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            align-items: center;
        }

        .context-tag {
            font-size: 0.7rem;
            font-weight: 600;
            padding: 0.2rem 0.6rem;
            border-radius: 100px;
            letter-spacing: 0.03em;
        }
        .context-tag.osi { background: rgba(59,130,246,0.1); color: var(--accent-blue); border: 1px solid rgba(59,130,246,0.2); }
        .context-tag.novel { background: rgba(139,92,246,0.1); color: var(--accent-purple); border: 1px solid rgba(139,92,246,0.2); }

        .context-example {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-style: italic;
        }

        .framework-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--accent-blue);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
            margin-top: 1rem;
            transition: gap 0.2s;
        }

        .framework-link:hover { gap: 0.75rem; }

        .framework-3d-pin {
            position: sticky;
            top: 80px;
            height: calc(100vh - 100px);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #framework-stack-canvas {
            width: 100%;
            height: 100%;
        }

        /* ============================================
           SCENE 4: THE PROOF
           ============================================ */
        #scene-proof {
            min-height: 100vh;
            padding: 8rem 0;
            position: relative;
            z-index: 1;
            background: linear-gradient(180deg,
                var(--bg-deep) 0%,
                rgba(8, 12, 24, 1) 50%,
                var(--bg-deep) 100%);
        }

        .proof-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .proof-header h2 {
            font-size: clamp(2rem, 3.5vw, 3rem);
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .proof-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }

        .proof-column h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .researcher-card {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 0.75rem;
            transition: background 0.2s;
        }

        .researcher-card:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .researcher-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-card);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
            flex-shrink: 0;
            border: 1px solid var(--border);
        }

        .researcher-name {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 0.15rem;
        }

        .researcher-inst {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        .researcher-contrib {
            font-size: 0.8rem;
            color: var(--text-dim);
        }

        .proof-note {
            font-size: 0.85rem;
            color: var(--text-dim);
            font-style: italic;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }

        .regulatory-list {
            list-style: none;
        }

        .regulatory-list li {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(30, 41, 59, 0.4);
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .regulatory-list li:last-child { border-bottom: none; }

        .check-icon {
            color: var(--accent-green);
            flex-shrink: 0;
            margin-top: 2px;
        }

        .regulatory-detail {
            font-size: 0.8rem;
            color: var(--text-dim);
        }

        /* ============================================
           SCENE 5: QUOTE
           ============================================ */
        #scene-quote {
            min-height: 60vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
            padding: 4rem 2rem;
        }

        .quote-text {
            font-size: clamp(1.25rem, 3vw, 2.5rem);
            font-weight: 300;
            color: var(--text-secondary);
            text-align: center;
            max-width: 800px;
            line-height: 1.5;
            letter-spacing: -0.01em;
            transform: scale(0.85);
            opacity: 0.3;
        }

        .quote-author {
            text-align: center;
            margin-top: 1.5rem;
            font-size: 0.9rem;
            color: var(--text-dim);
            opacity: 0;
        }

        .quote-author a {
            color: var(--text-muted);
            text-decoration: none;
        }

        .quote-author a:hover { color: var(--text-secondary); }

        /* ============================================
           SCENE 6: WHAT'S BUILT
           ============================================ */
        #scene-built {
            padding: 8rem 0;
            position: relative;
            z-index: 1;
            background: linear-gradient(180deg,
                rgba(5, 10, 20, 0) 0%,
                rgba(8, 12, 24, 1) 30%,
                rgba(8, 12, 24, 1) 70%,
                rgba(5, 10, 20, 0) 100%);
        }

        .built-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .built-header h2 {
            font-size: clamp(2rem, 3.5vw, 3rem);
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .bento-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.25rem;
        }

        .bento-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            transition: all 0.3s;
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
        }

        .bento-card:hover {
            border-color: rgba(59, 130, 246, 0.3);
            background: var(--bg-card-hover);
            transform: translateY(-4px);
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.3);
        }

        .bento-card .card-label {
            font-size: 0.7rem;
            font-weight: 600;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--text-dim);
            margin-bottom: 0.75rem;
        }

        .bento-card h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .bento-card .card-code {
            font-family: 'SF Mono', Monaco, 'Courier New', monospace;
            font-size: 0.8rem;
            color: var(--accent-cyan);
            background: rgba(6, 182, 212, 0.08);
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            display: inline-block;
            margin-bottom: 0.75rem;
        }

        .bento-card p {
            color: var(--text-muted);
            font-size: 0.875rem;
            line-height: 1.6;
            flex: 1;
        }

        .bento-card .card-link {
            color: var(--accent-blue);
            font-size: 0.85rem;
            font-weight: 500;
            margin-top: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
        }

        /* ============================================
           SCENE 7: VISION + CTA
           ============================================ */
        #scene-vision {
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding: 8rem 0;
            position: relative;
            z-index: 1;
        }

        .vision-content {
            max-width: 760px;
            margin: 0 auto;
            text-align: center;
        }

        .vision-content h2 {
            font-size: clamp(1.75rem, 3vw, 2.75rem);
            font-weight: 700;
            letter-spacing: -0.02em;
            line-height: 1.25;
            margin-bottom: 2rem;
        }

        .vision-terminology {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem 2rem;
            text-align: left;
            margin-bottom: 2.5rem;
        }

        .vision-terminology h4 {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .vision-terminology p {
            font-size: 0.9rem;
            color: var(--text-muted);
            line-height: 1.6;
        }

        .vision-questions {
            text-align: left;
            margin-bottom: 3rem;
        }

        .vision-questions h4 {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .vision-questions ul {
            list-style: none;
        }

        .vision-questions li {
            color: var(--text-muted);
            font-size: 0.9rem;
            padding: 0.4rem 0;
            padding-left: 1.25rem;
            position: relative;
        }

        .vision-questions li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--accent-blue);
            transform: translateY(-50%);
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.875rem 1.75rem;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.95rem;
            text-decoration: none;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }

        .btn-primary {
            background: var(--accent-blue);
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            border-color: rgba(59, 130, 246, 0.4);
            color: var(--text-primary);
            background: rgba(59, 130, 246, 0.05);
        }

        /* ============================================
           FOOTER
           ============================================ */
        footer {
            padding: 3rem 2rem;
            text-align: center;
            border-top: 1px solid var(--border);
            position: relative;
            z-index: 1;
        }

        .footer-links {
            display: flex;
            gap: 2rem;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .footer-links a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.85rem;
        }

        .footer-links a:hover { color: var(--text-secondary); }

        .footer-copy {
            color: var(--text-dim);
            font-size: 0.8rem;
        }

        /* ============================================
           RESPONSIVE
           ============================================ */
        @media (max-width: 1024px) {
            .framework-container {
                grid-template-columns: 1fr;
            }
            .framework-3d-pin {
                position: relative;
                top: auto;
                height: 60vh;
                order: -1;
            }
        }

        @media (max-width: 900px) {
            .problem-grid {
                grid-template-columns: 1fr;
                gap: 3rem;
            }
            .proof-grid {
                grid-template-columns: 1fr;
            }
            .bento-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 600px) {
            .bento-grid {
                grid-template-columns: 1fr;
            }
            nav { padding: 0 1rem; }
            .scene-inner { padding: 0 1.25rem; }
        }

        /* ============================================
           ANIMATIONS
           ============================================ */
        .fade-up {
            opacity: 0;
            transform: translateY(30px);
        }

        .fade-in {
            opacity: 0;
        }
    </style>
</head>
<body>

    <!-- =============================================
         NAVIGATION
         ============================================= -->
    <nav id="main-nav">
        <div class="nav-inner">
            <a href="#" class="nav-logo">ONI</a>
            <ul class="nav-links">
                <li><a href="#scene-hero" data-section="scene-hero">Home</a></li>
                <li><a href="#scene-framework" data-section="scene-framework">Framework</a></li>
                <li><a href="#scene-proof" data-section="scene-proof">Research</a></li>
                <li><a href="visualizations/index.html">Tools</a></li>
                <li><a href="https://medium.com/@qikevinl" target="_blank" rel="noopener">Blog</a></li>
                <li>
                    <a href="https://github.com/qikevinl/ONI" target="_blank" rel="noopener" class="nav-github" aria-label="GitHub">
                        <svg viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
                    </a>
                </li>
            </ul>
            <button class="nav-hamburger" onclick="toggleMobileMenu()" aria-label="Menu">
                <svg viewBox="0 0 24 24"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
            </button>
        </div>
    </nav>
    <div class="nav-mobile-menu" id="mobile-menu">
        <a href="#scene-hero" onclick="closeMobileMenu()">Home</a>
        <a href="#scene-framework" onclick="closeMobileMenu()">Framework</a>
        <a href="#scene-proof" onclick="closeMobileMenu()">Research</a>
        <a href="visualizations/index.html">Tools</a>
        <a href="https://medium.com/@qikevinl" target="_blank" rel="noopener">Blog</a>
        <a href="https://github.com/qikevinl/ONI" target="_blank" rel="noopener">GitHub</a>
    </div>

    <!-- =============================================
         THREE.JS CANVAS (Fixed behind content)
         ============================================= -->
    <div id="three-canvas"></div>

    <!-- =============================================
         SCENE 1: HERO
         ============================================= -->
    <section id="scene-hero" class="scene">
        <div class="hero-content">
            <div class="hero-label" id="hero-label">NEUROSECURITY STANDARDS FOR BRAIN-COMPUTER INTERFACES</div>
            <h1 class="hero-title" id="hero-title"></h1>
            <p class="hero-subtitle" id="hero-subtitle">No standards. No ethics. No security. Until now.</p>
            <a href="whitepaper/index.html" class="hero-cta" id="hero-cta">
                Read Whitepaper
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
            </a>
        </div>
        <div class="hero-scroll-indicator" id="scroll-indicator">
            <svg viewBox="0 0 24 24"><path d="M12 5v14M5 12l7 7 7-7"/></svg>
            <span class="hero-scroll-text">Scroll to explore the framework</span>
        </div>
    </section>

    <!-- =============================================
         SCENE 2: THE PROBLEM
         ============================================= -->
    <section id="scene-problem" class="scene">
        <div class="scene-inner">
            <div class="problem-grid">
                <div class="problem-text">
                    <div class="section-label fade-up">The Problem</div>
                    <h2 class="fade-up">BCIs are here.<br>Security standards aren't.</h2>
                    <p class="fade-up">The gap between BCI capability and security infrastructure is widening. Foundational researchers &mdash; Kohno, Bonaci, Yuste, Ienca &mdash; identified threats over a decade ago. But no unified, implementable framework exists. ONI fills that gap.</p>
                </div>
                <div class="problem-stats">
                    <div class="stat-item">
                        <div class="stat-number blue" data-target="6.2" data-prefix="$" data-suffix="B">$0</div>
                        <div class="stat-desc">BCI market by 2030</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number amber" data-target="400" data-suffix="K+">0</div>
                        <div class="stat-desc">Patients with neural implants</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number red" data-target="0" data-static="true">0</div>
                        <div class="stat-desc">Universal security standards</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- =============================================
         SCENE 3: THE FRAMEWORK (Sticky Scroll)
         ============================================= -->
    <section id="scene-framework" class="scene">
        <div class="scene-inner">
            <div class="framework-container">
                <div class="framework-text-track">
                    <!-- Overview Panel -->
                    <div class="framework-panel" data-zone="all">
                        <div class="section-label">The Framework</div>
                        <h3>14 layers.<br>From silicon to self.</h3>
                        <p>ONI extends the OSI model beyond Layer 7 into the biological domain. Seven silicon layers handle traditional digital security. A Neural Gateway bridges machine and mind. Six biological layers map the neural processing pipeline from ion channels to identity.</p>
                    </div>

                    <!-- L1: Physical Carrier -->
                    <div class="framework-panel layer-panel" data-layer="L1" data-zone="silicon">
                        <div class="layer-header">
                            <span class="layer-badge silicon">L1</span>
                            <span class="layer-name">Physical Carrier</span>
                        </div>
                        <p class="layer-desc">The hardware that touches your body &mdash; electrodes, wires, wireless signals carrying neural data from brain to device.</p>
                        <div class="layer-context">
                            <span class="context-tag osi">OSI: Physical Layer</span>
                            <span class="context-example">Think: the cables and radio waves that carry internet traffic</span>
                        </div>
                    </div>

                    <!-- L2: Signal Processing -->
                    <div class="framework-panel layer-panel" data-layer="L2" data-zone="silicon">
                        <div class="layer-header">
                            <span class="layer-badge silicon">L2</span>
                            <span class="layer-name">Signal Processing</span>
                        </div>
                        <p class="layer-desc">Cleaning raw brain signals &mdash; filtering noise, amplifying patterns, organizing data into usable frames.</p>
                        <div class="layer-context">
                            <span class="context-tag osi">OSI: Data Link</span>
                            <span class="context-example">Think: Ethernet frames that package raw data for delivery</span>
                        </div>
                    </div>

                    <!-- L3: Protocol -->
                    <div class="framework-panel layer-panel" data-layer="L3" data-zone="silicon">
                        <div class="layer-header">
                            <span class="layer-badge silicon">L3</span>
                            <span class="layer-name">Protocol</span>
                        </div>
                        <p class="layer-desc">Routing rules for neural data &mdash; which signals go where, how packets are addressed across the interface.</p>
                        <div class="layer-context">
                            <span class="context-tag osi">OSI: Network</span>
                            <span class="context-example">Think: IP addresses that route traffic across the internet</span>
                        </div>
                    </div>

                    <!-- L4: Transport -->
                    <div class="framework-panel layer-panel" data-layer="L4" data-zone="silicon">
                        <div class="layer-header">
                            <span class="layer-badge silicon">L4</span>
                            <span class="layer-name">Transport</span>
                        </div>
                        <p class="layer-desc">Ensuring neural data arrives complete and in order &mdash; reliable delivery between device and processing systems.</p>
                        <div class="layer-context">
                            <span class="context-tag osi">OSI: Transport</span>
                            <span class="context-example">Think: TCP ensuring your web page loads without missing pieces</span>
                        </div>
                    </div>

                    <!-- L5: Session -->
                    <div class="framework-panel layer-panel" data-layer="L5" data-zone="silicon">
                        <div class="layer-header">
                            <span class="layer-badge silicon">L5</span>
                            <span class="layer-name">Session</span>
                        </div>
                        <p class="layer-desc">Managing the conversation between device and brain &mdash; connection lifecycle, state management, synchronization.</p>
                        <div class="layer-context">
                            <span class="context-tag osi">OSI: Session</span>
                            <span class="context-example">Think: staying logged in while you browse a website</span>
                        </div>
                    </div>

                    <!-- L6: Presentation -->
                    <div class="framework-panel layer-panel" data-layer="L6" data-zone="silicon">
                        <div class="layer-header">
                            <span class="layer-badge silicon">L6</span>
                            <span class="layer-name">Presentation</span>
                        </div>
                        <p class="layer-desc">Translating neural data into formats software understands &mdash; encoding, compression, encryption.</p>
                        <div class="layer-context">
                            <span class="context-tag osi">OSI: Presentation</span>
                            <span class="context-example">Think: SSL encryption and data formatting for secure communication</span>
                        </div>
                    </div>

                    <!-- L7: Application Interface -->
                    <div class="framework-panel layer-panel" data-layer="L7" data-zone="silicon">
                        <div class="layer-header">
                            <span class="layer-badge silicon">L7</span>
                            <span class="layer-name">Application Interface</span>
                        </div>
                        <p class="layer-desc">The software layer &mdash; BCI apps, prosthetic control panels, neurofeedback dashboards.</p>
                        <div class="layer-context">
                            <span class="context-tag osi">OSI: Application</span>
                            <span class="context-example">Think: the apps and browsers you use every day</span>
                        </div>
                    </div>

                    <!-- L8: Neural Gateway -->
                    <div class="framework-panel layer-panel" data-layer="L8" data-zone="gateway">
                        <div class="layer-header">
                            <span class="layer-badge gateway">L8</span>
                            <span class="layer-name">Neural Gateway</span>
                        </div>
                        <p class="layer-desc">The firewall between machine and mind. Every signal crossing this boundary is measured against the Coherence Metric &mdash; a mathematical signature of signal integrity.</p>
                        <div class="formula">C&#x209B; = e<sup>&minus;(&sigma;&sup2;&phi; + &sigma;&sup2;&tau; + &sigma;&sup2;&gamma;)</sup></div>
                        <p class="layer-desc" style="margin-top:1rem;">Phase variance, transport variance, gain variance. If coherence drops below threshold, the signal is rejected before it reaches biology.</p>
                        <div class="layer-context">
                            <span class="context-tag novel">New to ONI</span>
                            <span class="context-example">No equivalent in traditional networking &mdash; networks don't connect to living tissue</span>
                        </div>
                    </div>

                    <!-- L9: Signal Processing (Bio) -->
                    <div class="framework-panel layer-panel" data-layer="L9" data-zone="biology">
                        <div class="layer-header">
                            <span class="layer-badge biology">L9</span>
                            <span class="layer-name">Signal Processing</span>
                        </div>
                        <p class="layer-desc">Your brain's own noise filter &mdash; how neurons clean, amplify, and gate the signals they receive from the interface.</p>
                        <div class="layer-context">
                            <span class="context-tag novel">New to ONI</span>
                            <span class="context-example">Biological filtering at the ion channel level</span>
                        </div>
                    </div>

                    <!-- L10: Neural Protocol -->
                    <div class="framework-panel layer-panel" data-layer="L10" data-zone="biology">
                        <div class="layer-header">
                            <span class="layer-badge biology">L10</span>
                            <span class="layer-name">Neural Protocol</span>
                        </div>
                        <p class="layer-desc">How your brain encodes information &mdash; the electrochemical language neurons use to communicate with each other.</p>
                        <div class="layer-context">
                            <span class="context-tag novel">New to ONI</span>
                            <span class="context-example">Neurotransmitter signaling and spike-timing patterns</span>
                        </div>
                    </div>

                    <!-- L11: Cognitive Transport -->
                    <div class="framework-panel layer-panel" data-layer="L11" data-zone="biology">
                        <div class="layer-header">
                            <span class="layer-badge biology">L11</span>
                            <span class="layer-name">Cognitive Transport</span>
                        </div>
                        <p class="layer-desc">How thoughts travel across brain regions &mdash; the neural highways connecting perception, memory, and action.</p>
                        <div class="layer-context">
                            <span class="context-tag novel">New to ONI</span>
                            <span class="context-example">White matter tracts and cross-regional neural routing</span>
                        </div>
                    </div>

                    <!-- L12: Cognitive Session -->
                    <div class="framework-panel layer-panel" data-layer="L12" data-zone="biology">
                        <div class="layer-header">
                            <span class="layer-badge biology">L12</span>
                            <span class="layer-name">Cognitive Session</span>
                        </div>
                        <p class="layer-desc">Your brain's working memory and attention &mdash; the context window that makes thoughts coherent and meaningful.</p>
                        <div class="layer-context">
                            <span class="context-tag novel">New to ONI</span>
                            <span class="context-example">Prefrontal cortex state management and attentional gating</span>
                        </div>
                    </div>

                    <!-- L13: Semantic Layer -->
                    <div class="framework-panel layer-panel" data-layer="L13" data-zone="biology">
                        <div class="layer-header">
                            <span class="layer-badge biology">L13</span>
                            <span class="layer-name">Semantic Layer</span>
                        </div>
                        <p class="layer-desc">Where signals become meaning &mdash; how your brain turns neural patterns into understanding, intention, and decisions.</p>
                        <div class="layer-context">
                            <span class="context-tag novel">New to ONI</span>
                            <span class="context-example">Higher-order cognition, intent formation, and decision-making</span>
                        </div>
                    </div>

                    <!-- L14: Identity Layer -->
                    <div class="framework-panel layer-panel" data-layer="L14" data-zone="biology">
                        <div class="layer-header">
                            <span class="layer-badge biology">L14</span>
                            <span class="layer-name">Identity Layer</span>
                        </div>
                        <p class="layer-desc">Your sense of self &mdash; consciousness, personality, the subjective "you" that experiences everything. The deepest layer to protect.</p>
                        <div class="layer-context">
                            <span class="context-tag novel">New to ONI</span>
                            <span class="context-example">Neural correlates of consciousness and personal identity</span>
                        </div>
                    </div>

                    <!-- Closing Panel: Threat Mapping -->
                    <div class="framework-panel closing-panel" data-zone="all">
                        <h3>46 threat signatures mapped.</h3>
                        <p>Every layer has been threat-modeled. From physical EM capture at L1 to brainprint theft at L14, the ONI framework provides a taxonomy of neural attack vectors &mdash; each with detection strategies and mitigation paths.</p>
                        <a href="visualizations/06-oni-threat-matrix.html" class="framework-link">
                            Explore the Threat Matrix
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                        </a>
                    </div>
                </div>

                <!-- 3D Stack (pinned) -->
                <div class="framework-3d-pin">
                    <canvas id="framework-stack-canvas"></canvas>
                </div>
            </div>
        </div>
    </section>

    <!-- =============================================
         SCENE 4: THE PROOF
         ============================================= -->
    <section id="scene-proof" class="scene">
        <div class="scene-inner">
            <div class="proof-header">
                <div class="section-label fade-up">Foundations</div>
                <h2 class="fade-up">Built on a decade of research.</h2>
            </div>
            <div class="proof-grid">
                <!-- Research Column -->
                <div class="proof-column fade-up">
                    <h3>Research Foundations</h3>

                    <div class="researcher-card">
                        <div class="researcher-avatar">TK</div>
                        <div>
                            <div class="researcher-name">Tadayoshi Kohno</div>
                            <div class="researcher-inst">University of Washington</div>
                            <div class="researcher-contrib">BCI threat modeling &amp; security analysis</div>
                        </div>
                    </div>

                    <div class="researcher-card">
                        <div class="researcher-avatar">TB</div>
                        <div>
                            <div class="researcher-name">Tamara Bonaci</div>
                            <div class="researcher-inst">University of Washington</div>
                            <div class="researcher-contrib">Neural signal attack demonstration</div>
                        </div>
                    </div>

                    <div class="researcher-card">
                        <div class="researcher-avatar">RY</div>
                        <div>
                            <div class="researcher-name">Rafael Yuste</div>
                            <div class="researcher-inst">Columbia University</div>
                            <div class="researcher-contrib">Neurorights framework</div>
                        </div>
                    </div>

                    <div class="researcher-card">
                        <div class="researcher-avatar">MI</div>
                        <div>
                            <div class="researcher-name">Marcello Ienca</div>
                            <div class="researcher-inst">ETH Zurich / TU Munich</div>
                            <div class="researcher-contrib">Four neurorights framework</div>
                        </div>
                    </div>

                    <div class="researcher-card">
                        <div class="researcher-avatar">GL</div>
                        <div>
                            <div class="researcher-name">Gabriel L&aacute;zaro-Mu&ntilde;oz</div>
                            <div class="researcher-inst">Harvard Law School</div>
                            <div class="researcher-contrib">Informed consent for neural devices</div>
                        </div>
                    </div>

                    <p class="proof-note">ONI extends foundational BCI security research into a unified, implementable architecture.</p>
                </div>

                <!-- Regulatory Column -->
                <div class="proof-column fade-up">
                    <h3>Regulatory Alignment</h3>
                    <ul class="regulatory-list">
                        <li>
                            <span class="check-icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg></span>
                            <div>
                                UNESCO Recommendation on Neurotechnology (2025)
                                <div class="regulatory-detail">15 of 17 elements implemented</div>
                            </div>
                        </li>
                        <li>
                            <span class="check-icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg></span>
                            <div>
                                US MIND Act (S. 2925)
                                <div class="regulatory-detail">Federal neurotechnology legislation</div>
                            </div>
                        </li>
                        <li>
                            <span class="check-icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg></span>
                            <div>
                                4 State Neurorights Laws
                                <div class="regulatory-detail">Colorado, California, Montana, Connecticut</div>
                            </div>
                        </li>
                        <li>
                            <span class="check-icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg></span>
                            <div>
                                FDA Cybersecurity Guidance (2023)
                                <div class="regulatory-detail">Medical device security requirements</div>
                            </div>
                        </li>
                        <li>
                            <span class="check-icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg></span>
                            <div>
                                9 Governance Documents Published
                                <div class="regulatory-detail">Ethics, consent, accessibility, data policy</div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- =============================================
         SCENE 5: QUOTE
         ============================================= -->
    <section id="scene-quote" class="scene">
        <div>
            <p class="quote-text" id="quote-text">"Only life's most important connections deserve the most thought."</p>
            <p class="quote-author" id="quote-author">&mdash; Kevin Qi</p>
        </div>
    </section>

    <!-- =============================================
         SCENE 6: WHAT'S BUILT
         ============================================= -->
    <section id="scene-built" class="scene">
        <div class="scene-inner">
            <div class="built-header">
                <div class="section-label fade-up">Ecosystem</div>
                <h2 class="fade-up">What's been built.</h2>
            </div>
            <div class="bento-grid">
                <a href="https://pypi.org/project/oni-framework/" target="_blank" rel="noopener" class="bento-card fade-up">
                    <div class="card-label">Python Package</div>
                    <h3>ONI Framework</h3>
                    <div class="card-code">pip install oni-framework</div>
                    <p>14-layer model, coherence metric, scale-frequency invariant. The core library.</p>
                    <span class="card-link">PyPI &rarr;</span>
                </a>

                <a href="https://pypi.org/project/oni-tara/" target="_blank" rel="noopener" class="bento-card fade-up">
                    <div class="card-label">Security Stack</div>
                    <h3>TARA Stack</h3>
                    <div class="card-code">pip install oni-tara</div>
                    <p>Attack simulation, signal analysis, neural firewall prototype. Named after the Buddhist goddess of protection.</p>
                    <span class="card-link">PyPI &rarr;</span>
                </a>

                <a href="visualizations/index.html" class="bento-card fade-up">
                    <div class="card-label">Web Applications</div>
                    <h3>Interactive Tools</h3>
                    <p>10 web apps: coherence playground, threat matrix, layer explorer, framework visualization, and more.</p>
                    <span class="card-link">Explore &rarr;</span>
                </a>

                <a href="whitepaper/index.html" class="bento-card fade-up">
                    <div class="card-label">Research</div>
                    <h3>Whitepaper</h3>
                    <p>Complete framework overview, market analysis, regulatory mapping, and technical architecture.</p>
                    <span class="card-link">Read &rarr;</span>
                </a>

                <a href="documentation/index.html" class="bento-card fade-up">
                    <div class="card-label">Documentation</div>
                    <h3>20+ Publications</h3>
                    <p>Technical documents and blog posts across 8 research areas. Detection theory, quantum encryption, neural ransomware, and more.</p>
                    <span class="card-link">Browse &rarr;</span>
                </a>

                <a href="https://github.com/qikevinl/ONI" target="_blank" rel="noopener" class="bento-card fade-up">
                    <div class="card-label">Open Source</div>
                    <h3>Apache 2.0</h3>
                    <p>Full transparency audit. Reproducible research. Human-AI collaboration documented in governance.</p>
                    <span class="card-link">GitHub &rarr;</span>
                </a>
            </div>
        </div>
    </section>

    <!-- =============================================
         SCENE 7: VISION + CTA
         ============================================= -->
    <section id="scene-vision" class="scene">
        <div class="scene-inner">
            <div class="vision-content">
                <div class="section-label fade-up">Vision</div>
                <h2 class="fade-up">The mind deserves the same security architecture we built for our networks.</h2>

                <div class="vision-terminology fade-up">
                    <h4>A Note on Terminology</h4>
                    <p>Foundational researchers established "BCI security" as the discipline. ONI adopts <em>neurosecurity</em> &mdash; protecting the neural system itself, regardless of what interfaces with it. The scope is broader: not just the interface, but everything it connects to.</p>
                </div>

                <div class="vision-questions fade-up">
                    <h4>Open Research Questions</h4>
                    <ul>
                        <li>Can coherence-based detection achieve clinical-grade sensitivity?</li>
                        <li>How do quantum key distribution protocols adapt to neural bandwidth constraints?</li>
                        <li>What governance models protect cognitive liberty while enabling therapeutic benefit?</li>
                    </ul>
                </div>

                <div class="cta-buttons fade-up">
                    <a href="whitepaper/index.html" class="btn btn-primary">Read the Whitepaper</a>
                    <a href="https://github.com/qikevinl/ONI" target="_blank" rel="noopener" class="btn btn-secondary">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
                        Star on GitHub
                    </a>
                    <a href="documentation/index.html" class="btn btn-secondary">View Documentation</a>
                </div>
            </div>
        </div>
    </section>

    <!-- =============================================
         FOOTER
         ============================================= -->
    <footer>
        <div class="footer-links">
            <a href="https://github.com/qikevinl/ONI/blob/main/ABOUT.md" target="_blank" rel="noopener">About</a>
            <a href="https://github.com/qikevinl/ONI" target="_blank" rel="noopener">GitHub</a>
            <a href="https://pypi.org/project/oni-framework/" target="_blank" rel="noopener">PyPI</a>
            <a href="https://medium.com/@qikevinl" target="_blank" rel="noopener">Medium</a>
        </div>
        <p class="footer-copy">&copy; 2026 Kevin Qi. Apache 2.0.</p>
    </footer>

    <!-- =============================================
         JAVASCRIPT
         ============================================= -->
    <script>
    (function() {
        'use strict';

        // =============================================
        // NAVIGATION
        // =============================================
        var mainNav = document.getElementById('main-nav');

        window.addEventListener('scroll', function() {
            if (window.scrollY > 50) {
                mainNav.classList.add('scrolled');
            } else {
                mainNav.classList.remove('scrolled');
            }
        });

        // Scroll spy
        var navLinks = document.querySelectorAll('.nav-links a[data-section]');
        var sections = document.querySelectorAll('.scene[id]');

        function updateScrollSpy() {
            var scrollPos = window.scrollY + 200;
            sections.forEach(function(section) {
                var top = section.offsetTop;
                var bottom = top + section.offsetHeight;
                var id = section.id;
                navLinks.forEach(function(link) {
                    if (link.dataset.section === id) {
                        if (scrollPos >= top && scrollPos < bottom) {
                            link.classList.add('active');
                        } else {
                            link.classList.remove('active');
                        }
                    }
                });
            });
        }
        window.addEventListener('scroll', updateScrollSpy);

        // Mobile menu
        window.toggleMobileMenu = function() {
            document.getElementById('mobile-menu').classList.toggle('open');
        };
        window.closeMobileMenu = function() {
            document.getElementById('mobile-menu').classList.remove('open');
        };

        // =============================================
        // HERO TEXT ANIMATION
        // =============================================
        var heroTitle = document.getElementById('hero-title');
        var titleText = 'The mind is the greatest frontier of our time.';
        var words = titleText.split(' ');
        heroTitle.innerHTML = words.map(function(w) {
            return '<span class="word">' + w + '</span>';
        }).join(' ');

        // Animate hero elements on load
        gsap.to('#hero-label', { opacity: 1, duration: 0.8, delay: 0.3 });

        gsap.to('.hero-title .word', {
            opacity: 1,
            y: 0,
            duration: 0.6,
            stagger: 0.08,
            delay: 0.6,
            ease: 'power2.out'
        });

        gsap.to('#hero-subtitle', { opacity: 1, duration: 0.8, delay: 1.8 });
        gsap.to('#hero-cta', { opacity: 1, duration: 0.8, delay: 2.2 });
        gsap.to('#scroll-indicator', { opacity: 1, duration: 0.8, delay: 2.8 });

        // Fade out hero on scroll
        gsap.to('.hero-content', {
            scrollTrigger: {
                trigger: '#scene-hero',
                start: 'top top',
                end: '80% top',
                scrub: 1
            },
            opacity: 0,
            y: -60
        });

        gsap.to('#scroll-indicator', {
            scrollTrigger: {
                trigger: '#scene-hero',
                start: '20% top',
                end: '40% top',
                scrub: 1
            },
            opacity: 0
        });

        // =============================================
        // FADE-UP ANIMATIONS (GSAP ScrollTrigger)
        // =============================================
        gsap.utils.toArray('.fade-up').forEach(function(el) {
            gsap.to(el, {
                scrollTrigger: {
                    trigger: el,
                    start: 'top 85%',
                    toggleActions: 'play none none none'
                },
                opacity: 1,
                y: 0,
                duration: 0.8,
                ease: 'power2.out'
            });
        });

        // =============================================
        // SCENE 2: STAT COUNTERS
        // =============================================
        document.querySelectorAll('.stat-item').forEach(function(item, i) {
            gsap.to(item, {
                scrollTrigger: {
                    trigger: item,
                    start: 'top 85%',
                    toggleActions: 'play none none none'
                },
                opacity: 1,
                x: 0,
                duration: 0.7,
                delay: i * 0.2,
                ease: 'power2.out',
                onStart: function() {
                    var numEl = item.querySelector('.stat-number');
                    if (!numEl || numEl.dataset.animated) return;
                    numEl.dataset.animated = '1';

                    var target = parseFloat(numEl.dataset.target);
                    var prefix = numEl.dataset.prefix || '';
                    var suffix = numEl.dataset.suffix || '';
                    var isStatic = numEl.dataset.static === 'true';

                    if (isStatic) {
                        numEl.textContent = prefix + target + suffix;
                        return;
                    }

                    var obj = { val: 0 };
                    gsap.to(obj, {
                        val: target,
                        duration: 1.5,
                        ease: 'power2.out',
                        onUpdate: function() {
                            if (target % 1 !== 0) {
                                numEl.textContent = prefix + obj.val.toFixed(1) + suffix;
                            } else {
                                numEl.textContent = prefix + Math.round(obj.val) + suffix;
                            }
                        }
                    });
                }
            });
        });

        // =============================================
        // SCENE 5: QUOTE SCROLL-SCALE
        // =============================================
        gsap.to('#quote-text', {
            scrollTrigger: {
                trigger: '#scene-quote',
                start: 'top 80%',
                end: 'center center',
                scrub: 1
            },
            scale: 1,
            opacity: 1,
            ease: 'power2.out'
        });

        gsap.to('#quote-author', {
            scrollTrigger: {
                trigger: '#scene-quote',
                start: 'center 60%',
                end: 'center 40%',
                scrub: 1
            },
            opacity: 1
        });

        // =============================================
        // THREE.JS: HERO CONCENTRIC SPHERES
        // =============================================
        var threeContainer = document.getElementById('three-canvas');
        if (threeContainer && typeof THREE !== 'undefined') {
            initHero3D();
        }

        function initHero3D() {
            var isMobile = window.innerWidth <= 768;
            var isTablet = window.innerWidth <= 1024;

            // Renderer
            var renderer = new THREE.WebGLRenderer({
                alpha: true,
                antialias: !isMobile,
                powerPreference: 'high-performance'
            });
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, isMobile ? 1.5 : 2));
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x050a14, 1);
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.2;
            threeContainer.appendChild(renderer.domElement);

            // Scene & Camera
            var scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x050a14, 0.035);
            var camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 0.1, 100);
            camera.position.set(0, 0.3, 7);

            // Groups
            var autoRotateGroup = new THREE.Group();
            var parallaxGroup = new THREE.Group();
            scene.add(autoRotateGroup);
            autoRotateGroup.add(parallaxGroup);

            // Lighting
            scene.add(new THREE.AmbientLight(0x1a2744, 0.3));
            var keyLight = new THREE.PointLight(0x3b82f6, 2.0, 25);
            keyLight.position.set(4, 3, 5);
            scene.add(keyLight);
            var fillLight = new THREE.PointLight(0x8b5cf6, 1.2, 20);
            fillLight.position.set(-3, -2, 3);
            scene.add(fillLight);
            var rimLight = new THREE.PointLight(0x06b6d4, 1.5, 20);
            rimLight.position.set(0, 1, -5);
            scene.add(rimLight);
            var gatewayLight = new THREE.PointLight(0xf59e0b, 1.0, 12);
            gatewayLight.position.set(0, 0, 3);
            scene.add(gatewayLight);

            // Fresnel Shader
            var fresnelVert = [
                'varying vec3 vNormal;',
                'varying vec3 vViewPos;',
                'void main() {',
                '  vNormal = normalize(normalMatrix * normal);',
                '  vec4 mv = modelViewMatrix * vec4(position, 1.0);',
                '  vViewPos = -mv.xyz;',
                '  gl_Position = projectionMatrix * mv;',
                '}'
            ].join('\n');

            var fresnelFrag = [
                'uniform vec3 uColor;',
                'uniform float uOpacity;',
                'uniform float uFresnelPower;',
                'uniform float uGlowIntensity;',
                'uniform float uTime;',
                'varying vec3 vNormal;',
                'varying vec3 vViewPos;',
                'void main() {',
                '  vec3 vd = normalize(vViewPos);',
                '  float fresnel = pow(1.0 - abs(dot(vd, vNormal)), uFresnelPower);',
                '  float shimmer = 1.0 + 0.08 * sin(uTime * 2.0 + vNormal.x * 12.0);',
                '  float alpha = fresnel * uOpacity * shimmer;',
                '  vec3 col = uColor * (1.0 + fresnel * uGlowIntensity);',
                '  gl_FragColor = vec4(col, alpha);',
                '}'
            ].join('\n');

            // Gateway Shader
            var gatewayFrag = [
                'uniform vec3 uColor;',
                'uniform float uOpacity;',
                'uniform float uTime;',
                'varying vec3 vNormal;',
                'varying vec3 vViewPos;',
                'void main() {',
                '  vec3 vd = normalize(vViewPos);',
                '  float fresnel = pow(1.0 - abs(dot(vd, vNormal)), 2.5);',
                '  float pulse = 0.6 + 0.4 * sin(uTime * 3.0);',
                '  float energy = fresnel * pulse;',
                '  float scan = 0.5 + 0.5 * sin(vNormal.y * 20.0 + uTime * 4.0);',
                '  energy += scan * 0.15 * fresnel;',
                '  vec3 col = uColor * (1.0 + energy * 2.0);',
                '  gl_FragColor = vec4(col, energy * uOpacity);',
                '}'
            ].join('\n');

            // Layer Config
            var allLayers = [
                { id:'L1',  r:2.90, c:[0.145,0.388,0.922], zone:'silicon',  fp:3.5 },
                { id:'L2',  r:2.72, c:[0.173,0.424,0.941], zone:'silicon',  fp:3.2 },
                { id:'L3',  r:2.55, c:[0.200,0.463,0.953], zone:'silicon',  fp:3.0 },
                { id:'L4',  r:2.38, c:[0.231,0.510,0.965], zone:'silicon',  fp:2.8 },
                { id:'L5',  r:2.22, c:[0.271,0.561,0.969], zone:'silicon',  fp:2.6 },
                { id:'L6',  r:2.06, c:[0.310,0.612,0.976], zone:'silicon',  fp:2.5 },
                { id:'L7',  r:1.90, c:[0.376,0.647,0.980], zone:'silicon',  fp:2.4 },
                { id:'L8',  r:1.72, c:[0.961,0.620,0.043], zone:'gateway',  fp:2.0 },
                { id:'L9',  r:1.52, c:[0.063,0.725,0.506], zone:'biology',  fp:2.8 },
                { id:'L10', r:1.38, c:[0.204,0.827,0.600], zone:'biology',  fp:2.6 },
                { id:'L11', r:1.24, c:[0.431,0.906,0.718], zone:'biology',  fp:2.4 },
                { id:'L12', r:1.10, c:[0.655,0.545,0.984], zone:'biology',  fp:2.3 },
                { id:'L13', r:0.96, c:[0.753,0.518,0.988], zone:'biology',  fp:2.2 },
                { id:'L14', r:0.82, c:[0.925,0.282,0.600], zone:'biology',  fp:2.0 },
            ];

            var mobileIdx = [0,2,4,6,7,9,11,13];
            var activeLayers = (isMobile || isTablet) ? mobileIdx.map(function(i){return allLayers[i];}) : allLayers;

            // Shells
            var shellGeo = new THREE.SphereGeometry(1, isMobile ? 32 : 64, isMobile ? 24 : 48);
            var shellMeshes = [], shellUniforms = [];

            activeLayers.forEach(function(layer) {
                var isGW = layer.zone === 'gateway';
                var u = {
                    uColor: { value: new THREE.Vector3(layer.c[0], layer.c[1], layer.c[2]) },
                    uOpacity: { value: isGW ? 0.7 : 0.45 },
                    uFresnelPower: { value: layer.fp },
                    uGlowIntensity: { value: isGW ? 2.5 : 1.2 },
                    uTime: { value: 0 }
                };
                var mat = new THREE.ShaderMaterial({
                    uniforms: u,
                    vertexShader: fresnelVert,
                    fragmentShader: isGW ? gatewayFrag : fresnelFrag,
                    transparent: true,
                    side: THREE.FrontSide,
                    depthWrite: false,
                    blending: THREE.AdditiveBlending,
                });
                var mesh = new THREE.Mesh(shellGeo, mat);
                mesh.scale.setScalar(layer.r);
                mesh.userData = layer;
                parallaxGroup.add(mesh);
                shellMeshes.push(mesh);
                shellUniforms.push(u);
            });

            // Wireframe overlays
            var wireIndices = isMobile ? [0,3,5,7] : [0,3,6,7,10,13];
            var wireGeo = new THREE.IcosahedronGeometry(1, 2);
            wireIndices.forEach(function(idx) {
                if (idx >= activeLayers.length) return;
                var L = activeLayers[idx];
                var wm = new THREE.MeshBasicMaterial({
                    color: new THREE.Color(L.c[0], L.c[1], L.c[2]),
                    wireframe: true, transparent: true,
                    opacity: L.zone === 'gateway' ? 0.12 : 0.05,
                    depthWrite: false,
                });
                var wMesh = new THREE.Mesh(wireGeo, wm);
                wMesh.scale.setScalar(L.r * 1.002);
                parallaxGroup.add(wMesh);
            });

            // Brain Core
            var coreGeo = new THREE.SphereGeometry(0.55, isMobile ? 24 : 48, isMobile ? 18 : 36);
            var cp = coreGeo.attributes.position;
            for (var i = 0; i < cp.count; i++) {
                var x = cp.getX(i), y = cp.getY(i), z = cp.getZ(i);
                var n1 = Math.sin(x*6)*Math.cos(y*7)*Math.sin(z*5)*0.04;
                var n2 = Math.sin(x*12+1)*Math.cos(y*11+2)*0.02;
                var n3 = Math.cos(z*15+x*8)*0.012;
                var len = Math.sqrt(x*x+y*y+z*z);
                var s = (0.55+n1+n2+n3)/len;
                cp.setXYZ(i, x*s, y*s*0.85, z*s);
            }
            coreGeo.computeVertexNormals();

            var coreVert = [
                'varying vec3 vNormal; varying vec3 vViewPos; varying vec3 vWP;',
                'void main() {',
                '  vNormal = normalize(normalMatrix * normal);',
                '  vec4 mv = modelViewMatrix * vec4(position,1.0);',
                '  vViewPos = -mv.xyz; vWP = position;',
                '  gl_Position = projectionMatrix * mv;',
                '}'
            ].join('\n');

            var coreFrag = [
                'uniform float uTime;',
                'varying vec3 vNormal; varying vec3 vViewPos; varying vec3 vWP;',
                'void main() {',
                '  vec3 vd = normalize(vViewPos);',
                '  float fresnel = pow(1.0-abs(dot(vd,vNormal)),2.0);',
                '  float sss = pow(max(0.0,dot(vd,-vNormal)),1.5)*0.4;',
                '  float wave = sin(vWP.x*8.0+uTime*2.5)*sin(vWP.z*8.0+uTime*1.8);',
                '  wave = wave*0.5+0.5;',
                '  vec3 base = vec3(0.85,0.2,0.45);',
                '  vec3 glow = vec3(0.5,0.15,0.65);',
                '  vec3 col = mix(base,glow,fresnel);',
                '  col += vec3(0.3,0.1,0.4)*sss;',
                '  col += vec3(0.2,0.05,0.3)*wave*0.3;',
                '  gl_FragColor = vec4(col, 0.7+fresnel*0.3);',
                '}'
            ].join('\n');

            var coreU = { uTime:{value:0} };
            var coreMat = new THREE.ShaderMaterial({
                uniforms: coreU,
                vertexShader: coreVert,
                fragmentShader: coreFrag,
                transparent: true, depthWrite: true,
            });
            var coreMesh = new THREE.Mesh(coreGeo, coreMat);
            parallaxGroup.add(coreMesh);

            // Inner glow
            var glowMat = new THREE.MeshBasicMaterial({
                color: 0xec4899, transparent: true, opacity: 0.15,
                depthWrite: false, blending: THREE.AdditiveBlending,
            });
            var glowMesh = new THREE.Mesh(new THREE.SphereGeometry(0.45,24,16), glowMat);
            parallaxGroup.add(glowMesh);

            // Neural Nodes
            var nodeCount = isMobile ? 40 : 100;
            var nPos = new Float32Array(nodeCount*3);
            var nSizes = new Float32Array(nodeCount);
            for (var i=0; i<nodeCount; i++) {
                var theta = Math.random()*Math.PI*2;
                var phi = Math.acos(2*Math.random()-1);
                var r = 0.50+Math.random()*0.06;
                nPos[i*3]   = r*Math.sin(phi)*Math.cos(theta);
                nPos[i*3+1] = r*Math.sin(phi)*Math.sin(theta)*0.85;
                nPos[i*3+2] = r*Math.cos(phi);
                nSizes[i] = 0.02+Math.random()*0.03;
            }
            var nodeGeo = new THREE.BufferGeometry();
            nodeGeo.setAttribute('position', new THREE.BufferAttribute(nPos,3));
            nodeGeo.setAttribute('size', new THREE.BufferAttribute(nSizes,1));

            var nodeVert = [
                'attribute float size; uniform float uTime; varying float vAlpha;',
                'void main() {',
                '  vec4 mv = modelViewMatrix * vec4(position,1.0);',
                '  float flicker = 0.5+0.5*sin(uTime*3.0+position.x*20.0+position.z*15.0);',
                '  vAlpha = flicker;',
                '  gl_PointSize = size * 300.0 / -mv.z * flicker;',
                '  gl_Position = projectionMatrix * mv;',
                '}'
            ].join('\n');

            var nodeFrag = [
                'varying float vAlpha;',
                'void main() {',
                '  float d = length(gl_PointCoord-vec2(0.5));',
                '  if(d>0.5) discard;',
                '  float glow = exp(-d*6.0);',
                '  vec3 col = mix(vec3(1.0,0.6,0.8),vec3(0.8,0.9,1.0),d);',
                '  gl_FragColor = vec4(col, glow*vAlpha*0.9);',
                '}'
            ].join('\n');

            var nodeU = { uTime:{value:0} };
            var nodeMat = new THREE.ShaderMaterial({
                uniforms: nodeU, vertexShader: nodeVert, fragmentShader: nodeFrag,
                transparent: true, depthWrite: false, blending: THREE.AdditiveBlending,
            });
            var nodeCloud = new THREE.Points(nodeGeo, nodeMat);
            parallaxGroup.add(nodeCloud);

            // Synapse Lines
            var linePos = [];
            var lc = 0, maxD = 0.35;
            for (var i=0; i<nodeCount && lc<60; i++) {
                for (var j=i+1; j<nodeCount && lc<60; j++) {
                    var dx=nPos[i*3]-nPos[j*3], dy=nPos[i*3+1]-nPos[j*3+1], dz=nPos[i*3+2]-nPos[j*3+2];
                    if (Math.sqrt(dx*dx+dy*dy+dz*dz) < maxD) {
                        linePos.push(nPos[i*3],nPos[i*3+1],nPos[i*3+2]);
                        linePos.push(nPos[j*3],nPos[j*3+1],nPos[j*3+2]);
                        lc++;
                    }
                }
            }
            var synapseLines = null;
            if (linePos.length > 0) {
                var lineGeo = new THREE.BufferGeometry();
                lineGeo.setAttribute('position', new THREE.Float32BufferAttribute(linePos,3));
                synapseLines = new THREE.LineSegments(lineGeo, new THREE.LineBasicMaterial({
                    color: 0xec4899, transparent: true, opacity: 0.15,
                    depthWrite: false, blending: THREE.AdditiveBlending,
                }));
                parallaxGroup.add(synapseLines);
            }

            // Ambient Dust
            var dustCount = isMobile ? 80 : 200;
            var dPos = new Float32Array(dustCount*3);
            for (var i=0; i<dustCount; i++) {
                dPos[i*3]   = (Math.random()-0.5)*10;
                dPos[i*3+1] = (Math.random()-0.5)*8;
                dPos[i*3+2] = (Math.random()-0.5)*6;
            }
            var dustGeo = new THREE.BufferGeometry();
            dustGeo.setAttribute('position', new THREE.BufferAttribute(dPos,3));
            var dustCloud = new THREE.Points(dustGeo, new THREE.PointsMaterial({
                color: 0x60a5fa, size: 0.015, transparent: true, opacity: 0.3,
                depthWrite: false, blending: THREE.AdditiveBlending, sizeAttenuation: true,
            }));
            scene.add(dustCloud);

            // Mouse parallax
            var mouseX = 0, mouseY = 0;
            if (!isMobile) {
                document.addEventListener('mousemove', function(e) {
                    mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
                    mouseY = (e.clientY / window.innerHeight - 0.5) * 2;
                });
            }

            // Visibility observer
            var clock = new THREE.Clock();
            var isVisible = true;

            var visObs = new IntersectionObserver(function(entries) {
                isVisible = entries[0].isIntersecting;
            }, { threshold: 0 });
            visObs.observe(threeContainer);

            // Resize
            function onResize() {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
            window.addEventListener('resize', onResize);

            // =============================================
            // SPHERE â†’ STACK MORPH (GSAP ScrollTrigger)
            // =============================================
            var morphProgress = { value: 0 };
            var originalRadii = activeLayers.map(function(l) { return l.r; });

            // Morph triggered when entering framework section
            gsap.to(morphProgress, {
                value: 1,
                scrollTrigger: {
                    trigger: '#scene-framework',
                    start: 'top 80%',
                    end: 'top 20%',
                    scrub: 1,
                },
                ease: 'none'
            });

            // Fade 3D canvas out after framework section
            gsap.to(threeContainer, {
                scrollTrigger: {
                    trigger: '#scene-proof',
                    start: 'top 80%',
                    end: 'top 40%',
                    scrub: 1
                },
                opacity: 0
            });

            // Restore opacity on scroll back
            ScrollTrigger.create({
                trigger: '#scene-hero',
                start: 'top top',
                end: 'bottom top',
                onEnter: function() { threeContainer.style.opacity = '1'; },
                onEnterBack: function() { threeContainer.style.opacity = '1'; }
            });

            // =============================================
            // PER-LAYER SCROLL TRACKING
            // =============================================
            var activeLayerIndex = -1; // -1 = no specific layer active (overview/closing)
            var activeZone = 'all';
            var layerPanels = document.querySelectorAll('.layer-panel');

            // Build a mapping from layer ID (L1-L14) to shell index
            var layerIdToShellIndex = {};
            activeLayers.forEach(function(layer, idx) {
                layerIdToShellIndex[layer.id] = idx;
            });

            layerPanels.forEach(function(panel) {
                ScrollTrigger.create({
                    trigger: panel,
                    start: 'top 60%',
                    end: 'bottom 40%',
                    onEnter: function() {
                        var lid = panel.dataset.layer;
                        activeLayerIndex = (lid && layerIdToShellIndex[lid] !== undefined) ? layerIdToShellIndex[lid] : -1;
                        activeZone = panel.dataset.zone || 'all';
                    },
                    onEnterBack: function() {
                        var lid = panel.dataset.layer;
                        activeLayerIndex = (lid && layerIdToShellIndex[lid] !== undefined) ? layerIdToShellIndex[lid] : -1;
                        activeZone = panel.dataset.zone || 'all';
                    }
                });
            });

            // Also track non-layer panels (overview, closing) to reset activeLayerIndex
            var nonLayerPanels = document.querySelectorAll('.framework-panel:not(.layer-panel)');
            nonLayerPanels.forEach(function(panel) {
                ScrollTrigger.create({
                    trigger: panel,
                    start: 'top 60%',
                    end: 'bottom 40%',
                    onEnter: function() { activeLayerIndex = -1; activeZone = panel.dataset.zone || 'all'; },
                    onEnterBack: function() { activeLayerIndex = -1; activeZone = panel.dataset.zone || 'all'; }
                });
            });

            // Per-shell scale multipliers (lerped in animation loop)
            var shellScaleMultipliers = activeLayers.map(function() { return 1.0; });

            // =============================================
            // ANIMATION LOOP
            // =============================================
            function animate() {
                requestAnimationFrame(animate);
                if (!isVisible) return;

                var dt = clock.getDelta();
                var t = clock.getElapsedTime();

                // Shader uniforms
                shellUniforms.forEach(function(u) { u.uTime.value = t; });
                coreU.uTime.value = t;
                nodeU.uTime.value = t;

                // Auto-rotation (slows during morph)
                var rotSpeed = 0.002 * (1 - morphProgress.value * 0.6);
                autoRotateGroup.rotation.y += rotSpeed;
                autoRotateGroup.rotation.x = Math.sin(t*0.15)*0.08 * (1 - morphProgress.value * 0.8);

                // Mouse parallax
                if (!isMobile) {
                    var parallaxStr = 1 - morphProgress.value * 0.7;
                    parallaxGroup.rotation.x += (mouseY*0.2*parallaxStr - parallaxGroup.rotation.x)*0.04;
                    parallaxGroup.rotation.y += (mouseX*0.3*parallaxStr - parallaxGroup.rotation.y)*0.04;
                }

                // Brain pulse
                var pulse = 1 + Math.sin(t*1.2)*0.025;
                var coreScale = 1 - morphProgress.value * 0.7; // Shrink during morph
                coreMesh.scale.set(pulse*coreScale, pulse*0.85*coreScale, pulse*coreScale);
                nodeCloud.scale.set(pulse*coreScale, pulse*0.85*coreScale, pulse*coreScale);
                if (synapseLines) synapseLines.scale.set(pulse*coreScale, pulse*0.85*coreScale, pulse*coreScale);
                coreMesh.material.opacity = 1 - morphProgress.value;
                glowMat.opacity = (0.12 + Math.sin(t*1.8)*0.05) * (1 - morphProgress.value);

                // MORPH: Spheres â†’ Flat Discs â†’ Vertical Stack + Per-Layer Grow/Snap
                var mp = morphProgress.value;

                // Determine per-shell scale targets based on active layer
                shellMeshes.forEach(function(mesh, i) {
                    var origR = originalRadii[i];
                    var layer = activeLayers[i];
                    var isGW = layer.zone === 'gateway';
                    var breathing = 1 + Math.sin(t*0.6+i*0.5)*0.006;

                    // Compute grow/snap target for this shell
                    var scaleTarget = 1.0;
                    var targetOpacity;

                    if (i === activeLayerIndex) {
                        // Active layer: grow
                        scaleTarget = isGW ? 1.8 : 1.4;
                        targetOpacity = isGW ? 0.95 : 0.8;
                    } else if (activeLayerIndex === -1) {
                        // No specific layer active (overview/closing) â€” use zone matching
                        var zoneMatch = (activeZone === 'all') || (activeZone === layer.zone);
                        scaleTarget = 1.0;
                        targetOpacity = zoneMatch ? (isGW ? 0.85 : 0.55) : (isGW ? 0.3 : 0.15);
                    } else {
                        // Different layer is active: dim
                        scaleTarget = 1.0;
                        targetOpacity = isGW ? 0.25 : 0.12;
                    }

                    // Lerp scale multiplier (slower grow, quicker snap-back)
                    var lerpFactor = (scaleTarget > shellScaleMultipliers[i]) ? 0.06 : 0.1;
                    shellScaleMultipliers[i] += (scaleTarget - shellScaleMultipliers[i]) * lerpFactor;

                    if (mp < 0.01) {
                        // Pure sphere mode
                        mesh.scale.setScalar(origR * breathing);
                        mesh.position.y = 0;
                    } else {
                        // Morphing: flatten Y, separate positions
                        var sm = shellScaleMultipliers[i];
                        var scaleXZ = origR * breathing * sm;
                        var scaleY = origR * breathing * (1 - mp * 0.92); // Flatten to ~8% height

                        // Stack position: evenly distribute layers vertically
                        var totalLayers = activeLayers.length;
                        var stackSpacing = 0.4;
                        var targetY = (i - (totalLayers - 1) / 2) * stackSpacing;

                        // L8 gets extra gap
                        var gwIndex = -1;
                        for (var g = 0; g < activeLayers.length; g++) {
                            if (activeLayers[g].zone === 'gateway') { gwIndex = g; break; }
                        }
                        if (gwIndex >= 0) {
                            if (i < gwIndex) targetY -= 0.15;
                            if (i > gwIndex) targetY += 0.15;
                        }

                        mesh.scale.set(scaleXZ, scaleY, scaleXZ);
                        mesh.position.y = targetY * mp;

                        // Opacity lerp
                        shellUniforms[i].uOpacity.value +=
                            (targetOpacity - shellUniforms[i].uOpacity.value) * 0.05;
                    }
                });

                // Camera adjusts during morph + L8 emphasis zoom
                var l8CameraZoom = 0;
                if (activeLayerIndex >= 0 && activeLayers[activeLayerIndex] && activeLayers[activeLayerIndex].zone === 'gateway') {
                    l8CameraZoom = -0.5; // nudge closer
                }
                var targetCamY = 0.3 + mp * 0.5;
                var targetCamZ = 7 + mp * 1 + l8CameraZoom;
                camera.position.y += (targetCamY - camera.position.y) * 0.03;
                camera.position.z += (targetCamZ - camera.position.z) * 0.03;

                // Gateway light â€” intensifies when L8 is active
                var gwLightBase = 0.8;
                var gwLightPulse = Math.sin(t*3.0)*0.4;
                if (activeLayerIndex >= 0 && activeLayers[activeLayerIndex] && activeLayers[activeLayerIndex].zone === 'gateway') {
                    gwLightBase = 1.6;
                    gwLightPulse = Math.sin(t*5.0)*0.6; // faster, stronger pulse
                }
                gatewayLight.intensity += ((gwLightBase + gwLightPulse) - gatewayLight.intensity) * 0.05;

                // Dust drift
                dustCloud.rotation.y = t*0.02;
                dustCloud.rotation.x = Math.sin(t*0.1)*0.05;

                renderer.render(scene, camera);
            }
            animate();
        }

        // =============================================
        // FRAMEWORK STACK CANVAS (2D Fallback for mobile)
        // =============================================
        var stackCanvas = document.getElementById('framework-stack-canvas');
        if (stackCanvas && window.innerWidth <= 1024) {
            initStackCanvas();
        }

        function initStackCanvas() {
            var ctx = stackCanvas.getContext('2d');
            var dpr = Math.min(window.devicePixelRatio, 2);

            function resize() {
                var rect = stackCanvas.parentElement.getBoundingClientRect();
                stackCanvas.width = rect.width * dpr;
                stackCanvas.height = rect.height * dpr;
                stackCanvas.style.width = rect.width + 'px';
                stackCanvas.style.height = rect.height + 'px';
                ctx.scale(dpr, dpr);
                draw();
            }

            var layers = [
                { id:'L1',  name:'Physical Carrier',    zone:'silicon',  color:'#2563eb' },
                { id:'L2',  name:'Signal Processing',   zone:'silicon',  color:'#2d6fde' },
                { id:'L3',  name:'Protocol',            zone:'silicon',  color:'#3378d6' },
                { id:'L4',  name:'Transport',           zone:'silicon',  color:'#3982cf' },
                { id:'L5',  name:'Session',             zone:'silicon',  color:'#448fc8' },
                { id:'L6',  name:'Presentation',        zone:'silicon',  color:'#4f9cc1' },
                { id:'L7',  name:'Application',         zone:'silicon',  color:'#60a5fa' },
                { id:'L8',  name:'Neural Gateway',      zone:'gateway',  color:'#f59e0b' },
                { id:'L9',  name:'Signal Processing',   zone:'biology',  color:'#059669' },
                { id:'L10', name:'Neural Protocol',     zone:'biology',  color:'#10b981' },
                { id:'L11', name:'Cognitive Transport',  zone:'biology',  color:'#34d399' },
                { id:'L12', name:'Cognitive Session',    zone:'biology',  color:'#818cf8' },
                { id:'L13', name:'Semantic Layer',       zone:'biology',  color:'#a78bfa' },
                { id:'L14', name:'Identity Layer',       zone:'biology',  color:'#ec4899' },
            ];

            function draw() {
                var w = stackCanvas.width / (Math.min(window.devicePixelRatio, 2));
                var h = stackCanvas.height / (Math.min(window.devicePixelRatio, 2));
                ctx.clearRect(0, 0, w, h);

                var barH = 32;
                var gap = 4;
                var totalH = layers.length * (barH + gap) - gap;
                var startY = (h - totalH) / 2;
                var maxW = w * 0.8;
                var minW = w * 0.35;

                layers.forEach(function(layer, i) {
                    var y = startY + i * (barH + gap);
                    // Hourglass width: wide at top and bottom, narrow at middle
                    var mid = 7; // L8 index
                    var dist = Math.abs(i - mid);
                    var maxDist = 7;
                    var widthRatio = 0.5 + 0.5 * (dist / maxDist);
                    var barW = minW + (maxW - minW) * widthRatio;
                    var x = (w - barW) / 2;

                    // Gateway special
                    if (layer.zone === 'gateway') {
                        barW = maxW * 0.6;
                        x = (w - barW) / 2;
                        y -= 4;

                        ctx.shadowColor = 'rgba(245, 158, 11, 0.4)';
                        ctx.shadowBlur = 20;
                    }

                    ctx.fillStyle = layer.color;
                    ctx.globalAlpha = layer.zone === 'gateway' ? 0.9 : 0.6;
                    ctx.beginPath();
                    ctx.roundRect(x, y, barW, barH, 6);
                    ctx.fill();
                    ctx.globalAlpha = 1;
                    ctx.shadowBlur = 0;

                    // Labels
                    ctx.fillStyle = 'rgba(255,255,255,0.9)';
                    ctx.font = '600 11px Inter, sans-serif';
                    ctx.fillText(layer.id, x + 10, y + barH/2 + 4);

                    ctx.fillStyle = 'rgba(255,255,255,0.6)';
                    ctx.font = '400 10px Inter, sans-serif';
                    ctx.fillText(layer.name, x + 40, y + barH/2 + 4);
                });
            }

            resize();
            window.addEventListener('resize', resize);
        }

        // =============================================
        // BRAND.JSON LOADER
        // =============================================
        fetch('https://raw.githubusercontent.com/qikevinl/ONI/main/MAIN/resources/brand/brand.json')
            .then(function(r) { return r.json(); })
            .catch(function() { return null; })
            .then(function(data) {
                if (!data || !data.oni) return;
                // Update page title meta if needed
                var desc = document.querySelector('meta[name="description"]');
                if (desc && data.oni.description) {
                    desc.content = data.oni.description;
                }
            });

    })();
    </script>
</body>
</html>
